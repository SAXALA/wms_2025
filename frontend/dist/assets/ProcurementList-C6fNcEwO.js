import{a as k}from"./api-CBBxTYRf.js";import{_ as V}from"./StatusTag-D7z7amcZ.js";import{r as b,o as C,c as L,b as w,d as _,e,w as a,f as s,i as p,h as m,t as f,F as q,j as B,g as N}from"./index-DBwGIS2Y.js";const S={class:"page-header flex-between"},F={class:"card-section"},A={__name:"ProcurementList",setup(I){const r=b(""),u=b([]);C(async()=>{u.value=await k.listPurchaseRequests()});const h=L(()=>{const n=r.value.trim().toLowerCase();return n?u.value.filter(t=>{const d=(t.displayId??t.id??"").toLowerCase(),i=(t.status??"").toLowerCase();return d.includes(n)||i.includes(n)}):u.value});return(n,t)=>{const d=s("Search"),i=s("el-icon"),y=s("el-input"),o=s("el-table-column"),v=s("el-tag"),x=s("el-button"),g=s("el-table");return p(),w("div",null,[_("div",S,[t[1]||(t[1]=_("h2",null,"我的申请列表",-1)),e(y,{modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=l=>r.value=l),placeholder:"搜索单号或状态",clearable:"",style:{width:"280px"}},{prefix:a(()=>[e(i,null,{default:a(()=>[e(d)]),_:1})]),_:1},8,["modelValue"])]),_("section",F,[e(g,{data:h.value,border:"",stripe:""},{default:a(()=>[e(o,{label:"申请单号",width:"160"},{default:a(({row:l})=>[m(f(l.displayId??l.id),1)]),_:1}),e(o,{prop:"submittedAt",label:"提交时间",width:"160"}),e(o,{label:"商品明细"},{default:a(({row:l})=>[(p(!0),w(q,null,B(l.items,c=>(p(),N(v,{key:c.sku,style:{"margin-right":"8px"}},{default:a(()=>[m(f(c.name)+" x "+f(c.quantity),1)]),_:2},1024))),128))]),_:1}),e(o,{label:"状态",width:"120"},{default:a(({row:l})=>[e(V,{status:l.status},null,8,["status"])]),_:1}),e(o,{label:"操作",width:"120"},{default:a(()=>[e(x,{link:"",type:"primary"},{default:a(()=>[...t[2]||(t[2]=[m("查看详情",-1)])]),_:1})]),_:1})]),_:1},8,["data"])])])}}};export{A as default};
