import{a as $e}from"./api-CBBxTYRf.js";import{_ as Vt,r as ce,a as Et,c as Bt,o as Gt,n as zt,b as xe,d as Y,e as we,w as je,f as De,F as Wt,j as Yt,i as Le,h as Ft,t as _e}from"./index-DBwGIS2Y.js";import{P as G,D as Ze,r as ke,a as dt,d as Ut,S as qe,b as He,l as Pe,_ as $,c as ft,e as re,f as Ve,i as Xt,g as pt,h as Je,j as Ee,k as le,m as mt,p as $t,t as jt,n as J,u as K,s as yt,o as Zt,q as Re,G as qt,v as ue,C as bt,w as At,x as ye,R as Be,y as U,z as St,A as xt,B as Ht,E as wt,F as Dt,H as Jt,I as Ge,J as Kt,K as Qt,L as er,M as Lt,N as tr,O as _t,Q as j,T as rr,Z as Oe,U as ar,V as nr,W as ir,X as Ke,Y as sr,$ as or,a0 as lr,a1 as ur,a2 as gr,a3 as Qe,a4 as et,a5 as vr,a6 as cr,a7 as tt,a8 as hr,a9 as dr,aa as fr}from"./installCanvasRenderer-CjKD-AXp.js";import{c as pr,g as mr,a as yr,d as br,i as Ar,b as Sr}from"./install-GTRPN8Dk.js";function Pt(a,r,t,e,n,s,i,o){var u=n-a,g=s-r,l=t-a,c=e-r,d=Math.sqrt(l*l+c*c);l/=d,c/=d;var h=u*l+g*c,v=h/d;v*=d;var f=i[0]=a+v*l,p=i[1]=r+v*c;return Math.sqrt((f-n)*(f-n)+(p-s)*(p-s))}var Z=new G,R=new G,B=new G,q=new G,X=new G,me=[],W=new G;function xr(a,r){if(r<=180&&r>0){r=r/180*Math.PI,Z.fromArray(a[0]),R.fromArray(a[1]),B.fromArray(a[2]),G.sub(q,Z,R),G.sub(X,B,R);var t=q.len(),e=X.len();if(!(t<.001||e<.001)){q.scale(1/t),X.scale(1/e);var n=q.dot(X),s=Math.cos(r);if(s<n){var i=Pt(R.x,R.y,B.x,B.y,Z.x,Z.y,me);W.fromArray(me),W.scaleAndAdd(X,i/Math.tan(Math.PI-r));var o=B.x!==R.x?(W.x-R.x)/(B.x-R.x):(W.y-R.y)/(B.y-R.y);if(isNaN(o))return;o<0?G.copy(W,R):o>1&&G.copy(W,B),W.toArray(a[1])}}}}function wr(a,r,t){if(t<=180&&t>0){t=t/180*Math.PI,Z.fromArray(a[0]),R.fromArray(a[1]),B.fromArray(a[2]),G.sub(q,R,Z),G.sub(X,B,R);var e=q.len(),n=X.len();if(!(e<.001||n<.001)){q.scale(1/e),X.scale(1/n);var s=q.dot(r),i=Math.cos(t);if(s<i){var o=Pt(R.x,R.y,B.x,B.y,Z.x,Z.y,me);W.fromArray(me);var u=Math.PI/2,g=Math.acos(X.dot(r)),l=u+g-t;if(l>=u)G.copy(W,B);else{W.scaleAndAdd(X,o/Math.tan(Math.PI/2-l));var c=B.x!==R.x?(W.x-R.x)/(B.x-R.x):(W.y-R.y)/(B.y-R.y);if(isNaN(c))return;c<0?G.copy(W,R):c>1&&G.copy(W,B)}W.toArray(a[1])}}}}function Te(a,r,t,e){var n=t==="normal",s=n?a:a.ensureState(t);s.ignore=r;var i=e.get("smooth");i&&i===!0&&(i=.3),s.shape=s.shape||{},i>0&&(s.shape.smooth=i);var o=e.getModel("lineStyle").getLineStyle();n?a.useStyle(o):s.style=o}function Dr(a,r){var t=r.smooth,e=r.points;if(e)if(a.moveTo(e[0][0],e[0][1]),t>0&&e.length>=3){var n=He(e[0],e[1]),s=He(e[1],e[2]);if(!n||!s){a.lineTo(e[1][0],e[1][1]),a.lineTo(e[2][0],e[2][1]);return}var i=Math.min(n,s)*t,o=Pe([],e[1],e[0],i/n),u=Pe([],e[1],e[2],i/s),g=Pe([],o,u,.5);a.bezierCurveTo(o[0],o[1],o[0],o[1],g[0],g[1]),a.bezierCurveTo(u[0],u[1],u[0],u[1],e[2][0],e[2][1])}else for(var l=1;l<e.length;l++)a.lineTo(e[l][0],e[l][1])}function Lr(a,r,t){var e=a.getTextGuideLine(),n=a.getTextContent();if(!n){e&&a.removeTextGuideLine();return}for(var s=r.normal,i=s.get("show"),o=n.ignore,u=0;u<Ze.length;u++){var g=Ze[u],l=r[g],c=g==="normal";if(l){var d=l.get("show"),h=c?o:ke(n.states[g]&&n.states[g].ignore,o);if(h||!ke(d,i)){var v=c?e:e&&e.states[g];v&&(v.ignore=!0),e&&Te(e,!0,g,l);continue}e||(e=new dt,a.setTextGuideLine(e),!c&&(o||!i)&&Te(e,!0,"normal",r.normal),a.stateProxy&&(e.stateProxy=a.stateProxy)),Te(e,!1,g,l)}}if(e){Ut(e.style,t),e.style.fill=null;var f=s.get("showAbove"),p=a.textGuideLineConfig=a.textGuideLineConfig||{};p.showAbove=f||!1,e.buildPath=Dr}}function _r(a,r){r=r||"labelLine";for(var t={normal:a.getModel(r)},e=0;e<qe.length;e++){var n=qe[e];t[n]=a.getModel([n,r])}return t}var Ne=function(a){$(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(t,e){return ft(null,this,{useEncodeDefaulter:!0})},r.prototype.getMarkerPosition=function(t,e,n){var s=this.coordinateSystem;if(s&&s.clampData){var i=s.clampData(t),o=s.dataToPoint(i);if(n)re(s.getAxes(),function(d,h){if(d.type==="category"&&e!=null){var v=d.getTicksCoords(),f=d.getTickModel().get("alignWithLabel"),p=i[h],y=e[h]==="x1"||e[h]==="y1";if(y&&!f&&(p+=1),v.length<2)return;if(v.length===2){o[h]=d.toGlobalCoord(d.getExtent()[y?1:0]);return}for(var b=void 0,m=void 0,x=1,A=0;A<v.length;A++){var w=v[A].coord,D=A===v.length-1?v[A-1].tickValue+x:v[A].tickValue;if(D===p){m=w;break}else if(D<p)b=w;else if(b!=null&&D>p){m=(w+b)/2;break}A===1&&(x=D-v[0].tickValue)}m==null&&(b?b&&(m=v[v.length-1].coord):m=v[0].coord),o[h]=d.toGlobalCoord(m)}});else{var u=this.getData(),g=u.getLayout("offset"),l=u.getLayout("size"),c=s.getBaseAxis().isHorizontal()?0:1;o[c]+=g+l/2}return o}return[NaN,NaN]},r.type="series.__base_bar__",r.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},r}(Ve);Ve.registerClass(Ne);var Pr=function(a){$(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.getInitialData=function(){return ft(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},r.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},r.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},r.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},r.type="series.bar",r.dependencies=["grid","polar"],r.defaultOption=Xt(Ne.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),r}(Ne),Tr=function(){function a(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return a}(),rt=function(a){$(r,a);function r(t){var e=a.call(this,t)||this;return e.type="sausage",e}return r.prototype.getDefaultShape=function(){return new Tr},r.prototype.buildPath=function(t,e){var n=e.cx,s=e.cy,i=Math.max(e.r0||0,0),o=Math.max(e.r,0),u=(o-i)*.5,g=i+u,l=e.startAngle,c=e.endAngle,d=e.clockwise,h=Math.PI*2,v=d?c-l<h:l-c<h;v||(l=c-(d?h:-h));var f=Math.cos(l),p=Math.sin(l),y=Math.cos(c),b=Math.sin(c);v?(t.moveTo(f*i+n,p*i+s),t.arc(f*g+n,p*g+s,u,-Math.PI+l,l,!d)):t.moveTo(f*o+n,p*o+s),t.arc(n,s,o,l,c,!d),t.arc(y*g+n,b*g+s,u,c-Math.PI*2,c-Math.PI,!d),i!==0&&t.arc(n,s,i,c,l,d)},r}(pt);function Ir(a,r){r=r||{};var t=r.isRoundCap;return function(e,n,s){var i=n.position;if(!i||i instanceof Array)return Je(e,n,s);var o=a(i),u=n.distance!=null?n.distance:5,g=this.shape,l=g.cx,c=g.cy,d=g.r,h=g.r0,v=(d+h)/2,f=g.startAngle,p=g.endAngle,y=(f+p)/2,b=t?Math.abs(d-h)/2:0,m=Math.cos,x=Math.sin,A=l+d*m(f),w=c+d*x(f),D="left",S="top";switch(o){case"startArc":A=l+(h-u)*m(y),w=c+(h-u)*x(y),D="center",S="top";break;case"insideStartArc":A=l+(h+u)*m(y),w=c+(h+u)*x(y),D="center",S="bottom";break;case"startAngle":A=l+v*m(f)+he(f,u+b,!1),w=c+v*x(f)+de(f,u+b,!1),D="right",S="middle";break;case"insideStartAngle":A=l+v*m(f)+he(f,-u+b,!1),w=c+v*x(f)+de(f,-u+b,!1),D="left",S="middle";break;case"middle":A=l+v*m(y),w=c+v*x(y),D="center",S="middle";break;case"endArc":A=l+(d+u)*m(y),w=c+(d+u)*x(y),D="center",S="bottom";break;case"insideEndArc":A=l+(d-u)*m(y),w=c+(d-u)*x(y),D="center",S="top";break;case"endAngle":A=l+v*m(p)+he(p,u+b,!0),w=c+v*x(p)+de(p,u+b,!0),D="left",S="middle";break;case"insideEndAngle":A=l+v*m(p)+he(p,-u+b,!0),w=c+v*x(p)+de(p,-u+b,!0),D="right",S="middle";break;default:return Je(e,n,s)}return e=e||{},e.x=A,e.y=w,e.align=D,e.verticalAlign=S,e}}function Cr(a,r,t,e){if(Ee(e)){a.setTextConfig({rotation:e});return}else if(le(r)){a.setTextConfig({rotation:0});return}var n=a.shape,s=n.clockwise?n.startAngle:n.endAngle,i=n.clockwise?n.endAngle:n.startAngle,o=(s+i)/2,u,g=t(r);switch(g){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":u=o;break;case"startAngle":case"insideStartAngle":u=s;break;case"endAngle":case"insideEndAngle":u=i;break;default:a.setTextConfig({rotation:0});return}var l=Math.PI*1.5-u;g==="middle"&&l>Math.PI/2&&l<Math.PI*1.5&&(l-=Math.PI),a.setTextConfig({rotation:l})}function he(a,r,t){return r*Math.sin(a)*(t?-1:1)}function de(a,r,t){return r*Math.cos(a)*(t?1:-1)}function oe(a,r,t){var e=a.get("borderRadius");if(e==null)return t?{cornerRadius:0}:null;le(e)||(e=[e,e,e,e]);var n=Math.abs(r.r||0-r.r0||0);return{cornerRadius:mt(e,function(s){return $t(s,n)})}}var Ie=Math.max,Ce=Math.min;function Mr(a,r){var t=a.getArea&&a.getArea();if(At(a,"cartesian2d")){var e=a.getBaseAxis();if(e.type!=="category"||!e.onBand){var n=r.getLayout("bandWidth");e.isHorizontal()?(t.x-=n,t.width+=n*2):(t.y-=n,t.height+=n*2)}}return t}var kr=function(a){$(r,a);function r(){var t=a.call(this)||this;return t.type=r.type,t._isFirstFrame=!0,t}return r.prototype.render=function(t,e,n,s){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var i=t.get("coordinateSystem");(i==="cartesian2d"||i==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,s))},r.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},r.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},r.prototype.eachRendered=function(t){jt(this._progressiveEls||this.group,t)},r.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;(this._isLargeDraw==null||e!==this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},r.prototype._renderNormal=function(t,e,n,s){var i=this.group,o=t.getData(),u=this._data,g=t.coordinateSystem,l=g.getBaseAxis(),c;g.type==="cartesian2d"?c=l.isHorizontal():g.type==="polar"&&(c=l.dim==="angle");var d=t.isAnimationEnabled()?t:null,h=Rr(t,g);h&&this._enableRealtimeSort(h,o,n);var v=t.get("clip",!0)||h,f=Mr(g,o);i.removeClipPath();var p=t.get("roundCap",!0),y=t.get("showBackground",!0),b=t.getModel("backgroundStyle"),m=b.get("borderRadius")||0,x=[],A=this._backgroundEls,w=s&&s.isInitSort,D=s&&s.type==="changeAxisOrder";function S(L){var M=fe[g.type](o,L),T=zr(g,c,M);return T.useStyle(b.getItemStyle()),g.type==="cartesian2d"?T.setShape("r",m):T.setShape("cornerRadius",m),x[L]=T,T}o.diff(u).add(function(L){var M=o.getItemModel(L),T=fe[g.type](o,L,M);if(y&&S(L),!(!o.hasValue(L)||!ot[g.type](T))){var E=!1;v&&(E=at[g.type](f,T));var _=nt[g.type](t,o,L,T,c,d,l.model,!1,p);h&&(_.forceLabelAnimation=!0),lt(_,o,L,M,T,t,c,g.type==="polar"),w?_.attr({shape:T}):h?it(h,d,_,T,L,c,!1,!1):J(_,{shape:T},t,L),o.setItemGraphicEl(L,_),i.add(_),_.ignore=E}}).update(function(L,M){var T=o.getItemModel(L),E=fe[g.type](o,L,T);if(y){var _=void 0;A.length===0?_=S(M):(_=A[M],_.useStyle(b.getItemStyle()),g.type==="cartesian2d"?_.setShape("r",m):_.setShape("cornerRadius",m),x[L]=_);var F=fe[g.type](o,L),z=It(c,F,g);K(_,{shape:z},d,L)}var P=u.getItemGraphicEl(M);if(!o.hasValue(L)||!ot[g.type](E)){i.remove(P);return}var C=!1;if(v&&(C=at[g.type](f,E),C&&i.remove(P)),P?yt(P):P=nt[g.type](t,o,L,E,c,d,l.model,!!P,p),h&&(P.forceLabelAnimation=!0),D){var O=P.getTextContent();if(O){var k=Zt(O);k.prevValue!=null&&(k.prevValue=k.value)}}else lt(P,o,L,T,E,t,c,g.type==="polar");w?P.attr({shape:E}):h?it(h,d,P,E,L,c,!0,D):K(P,{shape:E},t,L,null),o.setItemGraphicEl(L,P),P.ignore=C,i.add(P)}).remove(function(L){var M=u.getItemGraphicEl(L);M&&Re(M,t,L)}).execute();var I=this._backgroundGroup||(this._backgroundGroup=new qt);I.removeAll();for(var V=0;V<x.length;++V)I.add(x[V]);i.add(I),this._backgroundEls=x,this._data=o},r.prototype._renderLarge=function(t,e,n){this._clear(),gt(t,this.group),this._updateLargeClip(t)},r.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),gt(e,this.group,this._progressiveEls,!0)},r.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&pr(t.coordinateSystem,!1,t),n=this.group;e?n.setClipPath(e):n.removeClipPath()},r.prototype._enableRealtimeSort=function(t,e,n){var s=this;if(e.count()){var i=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var o=function(u){var g=e.getItemGraphicEl(u),l=g&&g.shape;return l&&Math.abs(i.isHorizontal()?l.height:l.width)||0};this._onRendered=function(){s._updateSortWithinSameData(e,o,i,n)},n.getZr().on("rendered",this._onRendered)}}},r.prototype._dataSort=function(t,e,n){var s=[];return t.each(t.mapDimension(e.dim),function(i,o){var u=n(o);u=u??NaN,s.push({dataIndex:o,mappedValue:u,ordinalNumber:i})}),s.sort(function(i,o){return o.mappedValue-i.mappedValue}),{ordinalNumbers:mt(s,function(i){return i.ordinalNumber})}},r.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var s=n.scale,i=t.mapDimension(n.dim),o=Number.MAX_VALUE,u=0,g=s.getOrdinalMeta().categories.length;u<g;++u){var l=t.rawIndexOf(i,s.getRawOrdinalNumber(u)),c=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(c>o)return!0;o=c}return!1},r.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,s=n.getExtent(),i=Math.max(0,s[0]),o=Math.min(s[1],n.getOrdinalMeta().categories.length-1);i<=o;++i)if(t.ordinalNumbers[i]!==n.getRawOrdinalNumber(i))return!0},r.prototype._updateSortWithinSameData=function(t,e,n,s){if(this._isOrderChangedWithinSameData(t,e,n)){var i=this._dataSort(t,n,e);this._isOrderDifferentInView(i,n)&&(this._removeOnRenderedListener(s),s.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:i}))}},r.prototype._dispatchInitSort=function(t,e,n){var s=e.baseAxis,i=this._dataSort(t,s,function(o){return t.get(t.mapDimension(e.otherAxis.dim),o)});n.dispatchAction({type:"changeAxisOrder",componentType:s.dim+"Axis",isInitSort:!0,axisId:s.index,sortInfo:i})},r.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},r.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},r.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},r.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(s){Re(s,t,ue(s).dataIndex)})):e.removeAll(),this._data=null,this._isFirstFrame=!0},r.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},r.type="bar",r}(bt),at={cartesian2d:function(a,r){var t=r.width<0?-1:1,e=r.height<0?-1:1;t<0&&(r.x+=r.width,r.width=-r.width),e<0&&(r.y+=r.height,r.height=-r.height);var n=a.x+a.width,s=a.y+a.height,i=Ie(r.x,a.x),o=Ce(r.x+r.width,n),u=Ie(r.y,a.y),g=Ce(r.y+r.height,s),l=o<i,c=g<u;return r.x=l&&i>n?o:i,r.y=c&&u>s?g:u,r.width=l?0:o-i,r.height=c?0:g-u,t<0&&(r.x+=r.width,r.width=-r.width),e<0&&(r.y+=r.height,r.height=-r.height),l||c},polar:function(a,r){var t=r.r0<=r.r?1:-1;if(t<0){var e=r.r;r.r=r.r0,r.r0=e}var n=Ce(r.r,a.r),s=Ie(r.r0,a.r0);r.r=n,r.r0=s;var i=n-s<0;if(t<0){var e=r.r;r.r=r.r0,r.r0=e}return i}},nt={cartesian2d:function(a,r,t,e,n,s,i,o,u){var g=new Be({shape:U({},e),z2:1});if(g.__dataIndex=t,g.name="item",s){var l=g.shape,c=n?"height":"width";l[c]=0}return g},polar:function(a,r,t,e,n,s,i,o,u){var g=!n&&u?rt:ye,l=new g({shape:e,z2:1});l.name="item";var c=Tt(n);if(l.calculateTextPosition=Ir(c,{isRoundCap:g===rt}),s){var d=l.shape,h=n?"r":"endAngle",v={};d[h]=n?e.r0:e.startAngle,v[h]=e[h],(o?K:J)(l,{shape:v},s)}return l}};function Rr(a,r){var t=a.get("realtimeSort",!0),e=r.getBaseAxis();if(t&&e.type==="category"&&r.type==="cartesian2d")return{baseAxis:e,otherAxis:r.getOtherAxis(e)}}function it(a,r,t,e,n,s,i,o){var u,g;s?(g={x:e.x,width:e.width},u={y:e.y,height:e.height}):(g={y:e.y,height:e.height},u={x:e.x,width:e.width}),o||(i?K:J)(t,{shape:u},r,n,null);var l=r?a.baseAxis.model:null;(i?K:J)(t,{shape:g},l,n)}function st(a,r){for(var t=0;t<r.length;t++)if(!isFinite(a[r[t]]))return!0;return!1}var Or=["x","y","width","height"],Nr=["cx","cy","r","startAngle","endAngle"],ot={cartesian2d:function(a){return!st(a,Or)},polar:function(a){return!st(a,Nr)}},fe={cartesian2d:function(a,r,t){var e=a.getItemLayout(r),n=t?Er(t,e):0,s=e.width>0?1:-1,i=e.height>0?1:-1;return{x:e.x+s*n/2,y:e.y+i*n/2,width:e.width-s*n,height:e.height-i*n}},polar:function(a,r,t){var e=a.getItemLayout(r);return{cx:e.cx,cy:e.cy,r0:e.r0,r:e.r,startAngle:e.startAngle,endAngle:e.endAngle,clockwise:e.clockwise}}};function Vr(a){return a.startAngle!=null&&a.endAngle!=null&&a.startAngle===a.endAngle}function Tt(a){return function(r){var t=r?"Arc":"Angle";return function(e){switch(e){case"start":case"insideStart":case"end":case"insideEnd":return e+t;default:return e}}}(a)}function lt(a,r,t,e,n,s,i,o){var u=r.getItemVisual(t,"style");if(o){if(!s.get("roundCap")){var l=a.shape,c=oe(e.getModel("itemStyle"),l,!0);U(l,c),a.setShape(l)}}else{var g=e.get(["itemStyle","borderRadius"])||0;a.setShape("r",g)}a.useStyle(u);var d=e.getShallow("cursor");d&&a.attr("cursor",d);var h=o?i?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":i?n.height>=0?"bottom":"top":n.width>=0?"right":"left",v=St(e);xt(a,v,{labelFetcher:s,labelDataIndex:t,defaultText:mr(s.getData(),t),inheritColor:u.fill,defaultOpacity:u.opacity,defaultOutsidePosition:h});var f=a.getTextContent();if(o&&f){var p=e.get(["label","position"]);a.textConfig.inside=p==="middle"?!0:null,Cr(a,p==="outside"?h:p,Tt(i),e.get(["label","rotate"]))}Ht(f,v,s.getRawValue(t),function(b){return yr(r,b)});var y=e.getModel(["emphasis"]);wt(a,y.get("focus"),y.get("blurScope"),y.get("disabled")),Dt(a,e),Vr(n)&&(a.style.fill="none",a.style.stroke="none",re(a.states,function(b){b.style&&(b.style.fill=b.style.stroke="none")}))}function Er(a,r){var t=a.get(["itemStyle","borderColor"]);if(!t||t==="none")return 0;var e=a.get(["itemStyle","borderWidth"])||0,n=isNaN(r.width)?Number.MAX_VALUE:Math.abs(r.width),s=isNaN(r.height)?Number.MAX_VALUE:Math.abs(r.height);return Math.min(e,n,s)}var Br=function(){function a(){}return a}(),ut=function(a){$(r,a);function r(t){var e=a.call(this,t)||this;return e.type="largeBar",e}return r.prototype.getDefaultShape=function(){return new Br},r.prototype.buildPath=function(t,e){for(var n=e.points,s=this.baseDimIdx,i=1-this.baseDimIdx,o=[],u=[],g=this.barWidth,l=0;l<n.length;l+=3)u[s]=g,u[i]=n[l+2],o[s]=n[l+s],o[i]=n[l+i],t.rect(o[0],o[1],u[0],u[1])},r}(pt);function gt(a,r,t,e){var n=a.getData(),s=n.getLayout("valueAxisHorizontal")?1:0,i=n.getLayout("largeDataIndices"),o=n.getLayout("size"),u=a.getModel("backgroundStyle"),g=n.getLayout("largeBackgroundPoints");if(g){var l=new ut({shape:{points:g},incremental:!!e,silent:!0,z2:0});l.baseDimIdx=s,l.largeDataIndices=i,l.barWidth=o,l.useStyle(u.getItemStyle()),r.add(l),t&&t.push(l)}var c=new ut({shape:{points:n.getLayout("largePoints")},incremental:!!e,ignoreCoarsePointer:!0,z2:1});c.baseDimIdx=s,c.largeDataIndices=i,c.barWidth=o,r.add(c),c.useStyle(n.getVisual("style")),c.style.stroke=null,ue(c).seriesIndex=a.seriesIndex,a.get("silent")||(c.on("mousedown",vt),c.on("mousemove",vt)),t&&t.push(c)}var vt=Jt(function(a){var r=this,t=Gr(r,a.offsetX,a.offsetY);ue(r).dataIndex=t>=0?t:null},30,!1);function Gr(a,r,t){for(var e=a.baseDimIdx,n=1-e,s=a.shape.points,i=a.largeDataIndices,o=[],u=[],g=a.barWidth,l=0,c=s.length/3;l<c;l++){var d=l*3;if(u[e]=g,u[n]=s[d+2],o[e]=s[d+e],o[n]=s[d+n],u[n]<0&&(o[n]+=u[n],u[n]=-u[n]),r>=o[0]&&r<=o[0]+u[0]&&t>=o[1]&&t<=o[1]+u[1])return i[l]}return-1}function It(a,r,t){if(At(t,"cartesian2d")){var e=r,n=t.getArea();return{x:a?e.x:n.x,y:a?n.y:e.y,width:a?e.width:n.width,height:a?n.height:e.height}}else{var n=t.getArea(),s=r;return{cx:n.cx,cy:n.cy,r0:a?n.r0:s.r0,r:a?n.r:s.r,startAngle:a?s.startAngle:0,endAngle:a?s.endAngle:Math.PI*2}}}function zr(a,r,t){var e=a.type==="polar"?ye:Be;return new e({shape:It(r,t,a),silent:!0,z2:0})}function Wr(a){a.registerChartView(kr),a.registerSeriesModel(Pr),a.registerLayout(a.PRIORITY.VISUAL.LAYOUT,Ge(Kt,"bar")),a.registerLayout(a.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Qt("bar")),a.registerProcessor(a.PRIORITY.PROCESSOR.STATISTIC,br("bar")),a.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(r,t){var e=r.componentType||"series";t.eachComponent({mainType:e,query:r},function(n){r.sortInfo&&n.axis.setCategorySortInfo(r.sortInfo)})})}var ct=Math.PI*2,pe=Math.PI/180;function Ct(a,r){return _t(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()})}function Mt(a,r){var t=Ct(a,r),e=a.get("center"),n=a.get("radius");le(n)||(n=[0,n]);var s=j(t.width,r.getWidth()),i=j(t.height,r.getHeight()),o=Math.min(s,i),u=j(n[0],o/2),g=j(n[1],o/2),l,c,d=a.coordinateSystem;if(d){var h=d.dataToPoint(e);l=h[0]||0,c=h[1]||0}else le(e)||(e=[e,e]),l=j(e[0],s)+t.x,c=j(e[1],i)+t.y;return{cx:l,cy:c,r0:u,r:g}}function Yr(a,r,t){r.eachSeriesByType(a,function(e){var n=e.getData(),s=n.mapDimension("value"),i=Ct(e,t),o=Mt(e,t),u=o.cx,g=o.cy,l=o.r,c=o.r0,d=-e.get("startAngle")*pe,h=e.get("endAngle"),v=e.get("padAngle")*pe;h=h==="auto"?d-ct:-h*pe;var f=e.get("minAngle")*pe,p=f+v,y=0;n.each(s,function(z){!isNaN(z)&&y++});var b=n.getSum(s),m=Math.PI/(b||y)*2,x=e.get("clockwise"),A=e.get("roseType"),w=e.get("stillShowZeroSum"),D=n.getDataExtent(s);D[0]=0;var S=x?1:-1,I=[d,h],V=S*v/2;er(I,!x),d=I[0],h=I[1];var L=kt(e);L.startAngle=d,L.endAngle=h,L.clockwise=x;var M=Math.abs(h-d),T=M,E=0,_=d;if(n.setLayout({viewRect:i,r:l}),n.each(s,function(z,P){var C;if(isNaN(z)){n.setItemLayout(P,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:x,cx:u,cy:g,r0:c,r:A?NaN:l});return}A!=="area"?C=b===0&&w?m:z*m:C=M/y,C<p?(C=p,T-=p):E+=z;var O=_+S*C,k=0,N=0;v>C?(k=_+S*C/2,N=k):(k=_+V,N=O-V),n.setItemLayout(P,{angle:C,startAngle:k,endAngle:N,clockwise:x,cx:u,cy:g,r0:c,r:A?tr(z,D,[c,l]):l}),_=O}),T<ct&&y)if(T<=.001){var F=M/y;n.each(s,function(z,P){if(!isNaN(z)){var C=n.getItemLayout(P);C.angle=F;var O=0,k=0;F<v?(O=d+S*(P+1/2)*F,k=O):(O=d+S*P*F+V,k=d+S*(P+1)*F-V),C.startAngle=O,C.endAngle=k}})}else m=T/E,_=d,n.each(s,function(z,P){if(!isNaN(z)){var C=n.getItemLayout(P),O=C.angle===p?p:z*m,k=0,N=0;O<v?(k=_+S*O/2,N=k):(k=_+V,N=_+S*O-V),C.startAngle=k,C.endAngle=N,_+=S*O}})})}var kt=Lt();function Fr(a){return{seriesType:a,reset:function(r,t){var e=t.findComponents({mainType:"legend"});if(!(!e||!e.length)){var n=r.getData();n.filterSelf(function(s){for(var i=n.getName(s),o=0;o<e.length;o++)if(!e[o].isSelected(i))return!1;return!0})}}}}var Ur=Math.PI/180;function ht(a,r,t,e,n,s,i,o,u,g){if(a.length<2)return;function l(f){for(var p=f.rB,y=p*p,b=0;b<f.list.length;b++){var m=f.list[b],x=Math.abs(m.label.y-t),A=e+m.len,w=A*A,D=Math.sqrt(Math.abs((1-x*x/y)*w)),S=r+(D+m.len2)*n,I=S-m.label.x,V=m.targetTextWidth-I*n;Rt(m,V,!0),m.label.x=S}}function c(f){for(var p={list:[],maxY:0},y={list:[],maxY:0},b=0;b<f.length;b++)if(f[b].labelAlignTo==="none"){var m=f[b],x=m.label.y>t?y:p,A=Math.abs(m.label.y-t);if(A>=x.maxY){var w=m.label.x-r-m.len2*n,D=e+m.len,S=Math.abs(w)<D?Math.sqrt(A*A/(1-w*w/D/D)):D;x.rB=S,x.maxY=A}x.list.push(m)}l(p),l(y)}for(var d=a.length,h=0;h<d;h++)if(a[h].position==="outer"&&a[h].labelAlignTo==="labelLine"){var v=a[h].label.x-g;a[h].linePoints[1][0]+=v,a[h].label.x=g}rr(a,u,u+i)&&c(a)}function Xr(a,r,t,e,n,s,i,o){for(var u=[],g=[],l=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<a.length;d++){var h=a[d].label;Me(a[d])||(h.x<r?(l=Math.min(l,h.x),u.push(a[d])):(c=Math.max(c,h.x),g.push(a[d])))}for(var d=0;d<a.length;d++){var v=a[d];if(!Me(v)&&v.linePoints){if(v.labelStyleWidth!=null)continue;var h=v.label,f=v.linePoints,p=void 0;v.labelAlignTo==="edge"?h.x<r?p=f[2][0]-v.labelDistance-i-v.edgeDistance:p=i+n-v.edgeDistance-f[2][0]-v.labelDistance:v.labelAlignTo==="labelLine"?h.x<r?p=l-i-v.bleedMargin:p=i+n-c-v.bleedMargin:h.x<r?p=h.x-i-v.bleedMargin:p=i+n-h.x-v.bleedMargin,v.targetTextWidth=p,Rt(v,p)}}ht(g,r,t,e,1,n,s,i,o,c),ht(u,r,t,e,-1,n,s,i,o,l);for(var d=0;d<a.length;d++){var v=a[d];if(!Me(v)&&v.linePoints){var h=v.label,f=v.linePoints,y=v.labelAlignTo==="edge",b=h.style.padding,m=b?b[1]+b[3]:0,x=h.style.backgroundColor?0:m,A=v.rect.width+x,w=f[1][0]-f[2][0];y?h.x<r?f[2][0]=i+v.edgeDistance+A+v.labelDistance:f[2][0]=i+n-v.edgeDistance-A-v.labelDistance:(h.x<r?f[2][0]=h.x+v.labelDistance:f[2][0]=h.x-v.labelDistance,f[1][0]=f[2][0]+w),f[1][1]=f[2][1]=h.y}}}function Rt(a,r,t){if(t===void 0&&(t=!1),a.labelStyleWidth==null){var e=a.label,n=e.style,s=a.rect,i=n.backgroundColor,o=n.padding,u=o?o[1]+o[3]:0,g=n.overflow,l=s.width+(i?0:u);if(r<l||t){var c=s.height;if(g&&g.match("break")){e.setStyle("backgroundColor",null),e.setStyle("width",r-u);var d=e.getBoundingRect();e.setStyle("width",Math.ceil(d.width)),e.setStyle("backgroundColor",i)}else{var h=r-u,v=r<l?h:t?h>a.unconstrainedWidth?null:h:null;e.setStyle("width",v)}var f=e.getBoundingRect();s.width=f.width;var p=(e.style.margin||0)+2.1;s.height=f.height+p,s.y-=(s.height-c)/2}}}function Me(a){return a.position==="center"}function $r(a){var r=a.getData(),t=[],e,n,s=!1,i=(a.get("minShowLabelAngle")||0)*Ur,o=r.getLayout("viewRect"),u=r.getLayout("r"),g=o.width,l=o.x,c=o.y,d=o.height;function h(w){w.ignore=!0}function v(w){if(!w.ignore)return!0;for(var D in w.states)if(w.states[D].ignore===!1)return!0;return!1}r.each(function(w){var D=r.getItemGraphicEl(w),S=D.shape,I=D.getTextContent(),V=D.getTextGuideLine(),L=r.getItemModel(w),M=L.getModel("label"),T=M.get("position")||L.get(["emphasis","label","position"]),E=M.get("distanceToLabelLine"),_=M.get("alignTo"),F=j(M.get("edgeDistance"),g),z=M.get("bleedMargin"),P=L.getModel("labelLine"),C=P.get("length");C=j(C,g);var O=P.get("length2");if(O=j(O,g),Math.abs(S.endAngle-S.startAngle)<i){re(I.states,h),I.ignore=!0,V&&(re(V.states,h),V.ignore=!0);return}if(v(I)){var k=(S.startAngle+S.endAngle)/2,N=Math.cos(k),H=Math.sin(k),ae,ge,ze,ve;e=S.cx,n=S.cy;var Q=T==="inside"||T==="inner";if(T==="center")ae=S.cx,ge=S.cy,ve="center";else{var be=(Q?(S.r+S.r0)/2*N:S.r*N)+e,Ae=(Q?(S.r+S.r0)/2*H:S.r*H)+n;if(ae=be+N*3,ge=Ae+H*3,!Q){var We=be+N*(C+u-S.r),Ye=Ae+H*(C+u-S.r),Fe=We+(N<0?-1:1)*O,Ue=Ye;_==="edge"?ae=N<0?l+F:l+g-F:ae=Fe+(N<0?-E:E),ge=Ue,ze=[[be,Ae],[We,Ye],[Fe,Ue]]}ve=Q?"center":_==="edge"?N>0?"right":"left":N>0?"left":"right"}var ne=Math.PI,ee=0,ie=M.get("rotate");if(Ee(ie))ee=ie*(ne/180);else if(T==="center")ee=0;else if(ie==="radial"||ie===!0){var Ot=N<0?-k+ne:-k;ee=Ot}else if(ie==="tangential"&&T!=="outside"&&T!=="outer"){var te=Math.atan2(N,H);te<0&&(te=ne*2+te);var Nt=H>0;Nt&&(te=ne+te),ee=te-ne}if(s=!!ee,I.x=ae,I.y=ge,I.rotation=ee,I.setStyle({verticalAlign:"middle"}),Q){I.setStyle({align:ve});var Se=I.states.select;Se&&(Se.x+=I.x,Se.y+=I.y)}else{var se=I.getBoundingRect().clone();se.applyTransform(I.getComputedTransform());var Xe=(I.style.margin||0)+2.1;se.y-=Xe/2,se.height+=Xe,t.push({label:I,labelLine:V,position:T,len:C,len2:O,minTurnAngle:P.get("minTurnAngle"),maxSurfaceAngle:P.get("maxSurfaceAngle"),surfaceNormal:new G(N,H),linePoints:ze,textAlign:ve,labelDistance:E,labelAlignTo:_,edgeDistance:F,bleedMargin:z,rect:se,unconstrainedWidth:se.width,labelStyleWidth:I.style.width})}D.setTextConfig({inside:Q})}}),!s&&a.get("avoidLabelOverlap")&&Xr(t,e,n,u,g,d,l,c);for(var f=0;f<t.length;f++){var p=t[f],y=p.label,b=p.labelLine,m=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:p.textAlign}),m&&(re(y.states,h),y.ignore=!0);var x=y.states.select;x&&(x.x+=y.x,x.y+=y.y)}if(b){var A=p.linePoints;m||!A?(re(b.states,h),b.ignore=!0):(xr(A,p.minTurnAngle),wr(A,p.surfaceNormal,p.maxSurfaceAngle),b.setShape({points:A}),y.__hostTarget.textGuideLineConfig={anchor:new G(A[0][0],A[0][1])})}}}var jr=function(a){$(r,a);function r(t,e,n){var s=a.call(this)||this;s.z2=2;var i=new Oe;return s.setTextContent(i),s.updateData(t,e,n,!0),s}return r.prototype.updateData=function(t,e,n,s){var i=this,o=t.hostModel,u=t.getItemModel(e),g=u.getModel("emphasis"),l=t.getItemLayout(e),c=U(oe(u.getModel("itemStyle"),l,!0),l);if(isNaN(c.startAngle)){i.setShape(c);return}if(s){i.setShape(c);var d=o.getShallow("animationType");o.ecModel.ssr?(J(i,{scaleX:0,scaleY:0},o,{dataIndex:e,isFrom:!0}),i.originX=c.cx,i.originY=c.cy):d==="scale"?(i.shape.r=l.r0,J(i,{shape:{r:l.r}},o,e)):n!=null?(i.setShape({startAngle:n,endAngle:n}),J(i,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},o,e)):(i.shape.endAngle=l.startAngle,K(i,{shape:{endAngle:l.endAngle}},o,e))}else yt(i),K(i,{shape:c},o,e);i.useStyle(t.getItemVisual(e,"style")),Dt(i,u);var h=(l.startAngle+l.endAngle)/2,v=o.get("selectedOffset"),f=Math.cos(h)*v,p=Math.sin(h)*v,y=u.getShallow("cursor");y&&i.attr("cursor",y),this._updateLabel(o,t,e),i.ensureState("emphasis").shape=U({r:l.r+(g.get("scale")&&g.get("scaleSize")||0)},oe(g.getModel("itemStyle"),l)),U(i.ensureState("select"),{x:f,y:p,shape:oe(u.getModel(["select","itemStyle"]),l)}),U(i.ensureState("blur"),{shape:oe(u.getModel(["blur","itemStyle"]),l)});var b=i.getTextGuideLine(),m=i.getTextContent();b&&U(b.ensureState("select"),{x:f,y:p}),U(m.ensureState("select"),{x:f,y:p}),wt(this,g.get("focus"),g.get("blurScope"),g.get("disabled"))},r.prototype._updateLabel=function(t,e,n){var s=this,i=e.getItemModel(n),o=i.getModel("labelLine"),u=e.getItemVisual(n,"style"),g=u&&u.fill,l=u&&u.opacity;xt(s,St(i),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:g,defaultOpacity:l,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var c=s.getTextContent();s.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=t.get(["label","position"]);if(d!=="outside"&&d!=="outer")s.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new dt,this.setTextGuideLine(h)),Lr(this,_r(i),{stroke:g,opacity:ar(o.get(["lineStyle","opacity"]),l,1)})}},r}(ye),Zr=function(a){$(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return r.prototype.render=function(t,e,n,s){var i=t.getData(),o=this._data,u=this.group,g;if(!o&&i.count()>0){for(var l=i.getItemLayout(0),c=1;isNaN(l&&l.startAngle)&&c<i.count();++c)l=i.getItemLayout(c);l&&(g=l.startAngle)}if(this._emptyCircleSector&&u.remove(this._emptyCircleSector),i.count()===0&&t.get("showEmptyCircle")){var d=kt(t),h=new ye({shape:U(Mt(t,n),d)});h.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=h,u.add(h)}i.diff(o).add(function(v){var f=new jr(i,v,g);i.setItemGraphicEl(v,f),u.add(f)}).update(function(v,f){var p=o.getItemGraphicEl(f);p.updateData(i,v,g),p.off("click"),u.add(p),i.setItemGraphicEl(v,p)}).remove(function(v){var f=o.getItemGraphicEl(v);Re(f,t,v)}).execute(),$r(t),t.get("animationTypeUpdate")!=="expansion"&&(this._data=i)},r.prototype.dispose=function(){},r.prototype.containPoint=function(t,e){var n=e.getData(),s=n.getItemLayout(0);if(s){var i=t[0]-s.cx,o=t[1]-s.cy,u=Math.sqrt(i*i+o*o);return u<=s.r&&u>=s.r0}},r.type="pie",r}(bt);function qr(a,r,t){r=le(r)&&{coordDimensions:r}||U({encodeDefine:a.getEncode()},r);var e=a.getSource(),n=nr(e,r).dimensions,s=new ir(n,a);return s.initData(e,t),s}var Hr=function(){function a(r,t){this._getDataWithEncodedVisual=r,this._getRawData=t}return a.prototype.getAllNames=function(){var r=this._getRawData();return r.mapArray(r.getName)},a.prototype.containName=function(r){var t=this._getRawData();return t.indexOfName(r)>=0},a.prototype.indexOfName=function(r){var t=this._getDataWithEncodedVisual();return t.indexOfName(r)},a.prototype.getItemVisual=function(r,t){var e=this._getDataWithEncodedVisual();return e.getItemVisual(r,t)},a}(),Jr=Lt(),Kr=function(a){$(r,a);function r(){return a!==null&&a.apply(this,arguments)||this}return r.prototype.init=function(t){a.prototype.init.apply(this,arguments),this.legendVisualProvider=new Hr(Ke(this.getData,this),Ke(this.getRawData,this)),this._defaultLabelLine(t)},r.prototype.mergeOption=function(){a.prototype.mergeOption.apply(this,arguments)},r.prototype.getInitialData=function(){return qr(this,{coordDimensions:["value"],encodeDefaulter:Ge(sr,this)})},r.prototype.getDataParams=function(t){var e=this.getData(),n=Jr(e),s=n.seats;if(!s){var i=[];e.each(e.mapDimension("value"),function(u){i.push(u)}),s=n.seats=or(i,e.hostModel.get("percentPrecision"))}var o=a.prototype.getDataParams.call(this,t);return o.percent=s[t]||0,o.$vars.push("percent"),o},r.prototype._defaultLabelLine=function(t){lr(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},r.type="series.pie",r.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},r}(Ve);function Qr(a){return{seriesType:a,reset:function(r,t){var e=r.getData();e.filterSelf(function(n){var s=e.mapDimension("value"),i=e.get(s,n);return!(Ee(i)&&!isNaN(i)&&i<0)})}}}function ea(a){a.registerChartView(Zr),a.registerSeriesModel(Kr),ur("pie",a.registerAction),a.registerLayout(Ge(Yr,"pie")),a.registerProcessor(Fr("pie")),a.registerProcessor(Qr("pie"))}var ta=function(a){$(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t.layoutMode={type:"box",ignoreSize:!0},t}return r.type="title",r.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},r}(gr),ra=function(a){$(r,a);function r(){var t=a!==null&&a.apply(this,arguments)||this;return t.type=r.type,t}return r.prototype.render=function(t,e,n){if(this.group.removeAll(),!!t.get("show")){var s=this.group,i=t.getModel("textStyle"),o=t.getModel("subtextStyle"),u=t.get("textAlign"),g=ke(t.get("textBaseline"),t.get("textVerticalAlign")),l=new Oe({style:Qe(i,{text:t.get("text"),fill:i.getTextColor()},{disableBox:!0}),z2:10}),c=l.getBoundingRect(),d=t.get("subtext"),h=new Oe({style:Qe(o,{text:d,fill:o.getTextColor(),y:c.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),v=t.get("link"),f=t.get("sublink"),p=t.get("triggerEvent",!0);l.silent=!v&&!p,h.silent=!f&&!p,v&&l.on("click",function(){et(v,"_"+t.get("target"))}),f&&h.on("click",function(){et(f,"_"+t.get("subtarget"))}),ue(l).eventData=ue(h).eventData=p?{componentType:"title",componentIndex:t.componentIndex}:null,s.add(l),d&&s.add(h);var y=s.getBoundingRect(),b=t.getBoxLayoutParams();b.width=y.width,b.height=y.height;var m=_t(b,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));u||(u=t.get("left")||t.get("right"),u==="middle"&&(u="center"),u==="right"?m.x+=m.width:u==="center"&&(m.x+=m.width/2)),g||(g=t.get("top")||t.get("bottom"),g==="center"&&(g="middle"),g==="bottom"?m.y+=m.height:g==="middle"&&(m.y+=m.height/2),g=g||"top"),s.x=m.x,s.y=m.y,s.markRedraw();var x={align:u,verticalAlign:g};l.setStyle(x),h.setStyle(x),y=s.getBoundingRect();var A=m.margin,w=t.getItemStyle(["color","opacity"]);w.fill=t.get("backgroundColor");var D=new Be({shape:{x:y.x-A[3],y:y.y-A[0],width:y.width+A[1]+A[3],height:y.height+A[0]+A[2],r:t.get("borderRadius")},style:w,subPixelOptimize:!0,silent:!0});s.add(D)}},r.type="title",r}(vr);function aa(a){a.registerComponentModel(ta),a.registerComponentView(ra)}const na={class:"page-header flex-between"},ia={class:"stats-grid"},sa={class:"stat-card__title"},oa={class:"stat-card__value"},la={class:"stat-card__desc"},ua={class:"card-section"},ga={class:"card-section"},va={__name:"AnalyticsDashboard",setup(a){cr([Wr,Ar,ea,hr,Sr,dr,aa,fr]);const r=ce(!1),t=Et({inbound:0,outbound:0,inventoryValue:0,turnoverDays:0}),e=ce([]),n=ce(null),s=ce(null);let i,o;const u=Bt(()=>[{label:"月度入库量",value:t.inbound,desc:"单位：批次"},{label:"月度出库量",value:t.outbound,desc:"单位：批次"},{label:"库存总价值",value:`${t.inventoryValue} M¥`,desc:"按平均采购价估算"},{label:"库存周转天数",value:t.turnoverDays,desc:"目标：≤ 45 天"}]),g=()=>{if(!n.value)return;i=i??tt(n.value);const h=e.value.map(v=>v.date);i.setOption({tooltip:{trigger:"axis"},legend:{data:["入库","出库"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:h},yAxis:{type:"value"},series:[{name:"入库",type:"bar",data:e.value.map(v=>v.inbound),itemStyle:{color:"#22c55e"}},{name:"出库",type:"line",data:e.value.map(v=>v.outbound),smooth:!0,lineStyle:{color:"#3b82f6"}}]})},l=()=>{s.value&&(o=o??tt(s.value),o.setOption({tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},series:[{name:"库存结构",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:18,fontWeight:"bold"}},labelLine:{show:!1},data:[{value:45,name:"原材料"},{value:30,name:"周转工具"},{value:15,name:"包装耗材"},{value:10,name:"备品备件"}]}]}))},c=async()=>{r.value=!0;try{const[h,v]=await Promise.all([$e.getDashboardStats(),$e.getInventoryTrends()]);Object.assign(t,h),e.value=v,g(),l()}finally{r.value=!1}};Gt(()=>{c(),window.addEventListener("resize",d)});const d=()=>{i==null||i.resize(),o==null||o.resize()};return zt(()=>{window.removeEventListener("resize",d),i==null||i.dispose(),o==null||o.dispose()}),(h,v)=>{const f=De("RefreshRight"),p=De("el-icon"),y=De("el-button");return Le(),xe("div",null,[Y("div",na,[v[1]||(v[1]=Y("h2",null,"报表分析仪表盘",-1)),we(y,{type:"primary",onClick:c,loading:r.value},{default:je(()=>[we(p,null,{default:je(()=>[we(f)]),_:1}),v[0]||(v[0]=Ft(" 刷新数据 ",-1))]),_:1},8,["loading"])]),Y("section",ia,[(Le(!0),xe(Wt,null,Yt(u.value,b=>(Le(),xe("div",{class:"stat-card",key:b.label},[Y("div",sa,_e(b.label),1),Y("div",oa,_e(b.value),1),Y("div",la,_e(b.desc),1)]))),128))]),Y("section",ua,[v[2]||(v[2]=Y("h3",null,"出入库趋势对比",-1)),Y("div",{ref_key:"trendRef",ref:n,class:"chart"},null,512)]),Y("section",ga,[v[3]||(v[3]=Y("h3",null,"库存结构分布",-1)),Y("div",{ref_key:"pieRef",ref:s,class:"chart"},null,512)])])}}},pa=Vt(va,[["__scopeId","data-v-70d79771"]]);export{pa as default};
