import{a as re}from"./api-CBBxTYRf.js";import{_ as ne,r as pt,c as oe,o as se,n as le,b as ue,d as P,e as R,w as N,f as K,i as pe,h as ct}from"./index-DBwGIS2Y.js";import{X as C,ab as ce,ac as B,e as S,k as D,ad as qt,ae as ht,af as vt,ag as T,ah as he,ai as ve,N as G,m as st,aj as fe,ak as de,al as ft,am as zt,_ as k,t as ge,w as ye,z as Ct,R as at,A as me,E as Se,an as Yt,C as _e,c as Me,ao as be,f as xe,ap as Ve,aq as we,ar as Ie,as as ze,at as Jt,au as Rt,a2 as Ce,i as Qt,av as Re,aw as Le,a5 as Oe,O as Te,Z as X,a3 as et,G as rt,p as Lt,ax as _t,ay as Mt,az as De,y as He,aA as Ae,aB as dt,aC as gt,aD as ke,aE as Pe,v as Ee,aF as Be,aG as Ge,aH as Ne,aI as Ot,aJ as Fe,aK as $e,a6 as bt,a7 as Ue,a8 as Ke,a9 as We,aa as Ze}from"./installCanvasRenderer-CjKD-AXp.js";var q=S,Xe=B,nt=-1,z=function(){function n(i){var t=i.mappingMethod,e=i.type,a=this.option=T(i);this.type=e,this.mappingMethod=t,this._normalizeData=Je[t];var r=n.visualHandlers[e];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._normalizedToVisual=r._normalizedToVisual[t],t==="piecewise"?(yt(a),qe(a)):t==="category"?a.categories?Ye(a):yt(a,!0):(ve(t!=="linear"||a.dataExtent),yt(a))}return n.prototype.mapValueToVisual=function(i){var t=this._normalizeData(i);return this._normalizedToVisual(t,i)},n.prototype.getNormalizer=function(){return C(this._normalizeData,this)},n.listVisualTypes=function(){return ce(n.visualHandlers)},n.isValidType=function(i){return n.visualHandlers.hasOwnProperty(i)},n.eachVisual=function(i,t,e){B(i)?S(i,t,e):t.call(e,i)},n.mapVisual=function(i,t,e){var a,r=D(i)?[]:B(i)?{}:(a=!0,null);return n.eachVisual(i,function(o,s){var l=t.call(e,o,s);a?r=l:r[s]=l}),r},n.retrieveVisuals=function(i){var t={},e;return i&&q(n.visualHandlers,function(a,r){i.hasOwnProperty(r)&&(t[r]=i[r],e=!0)}),e?t:null},n.prepareVisualTypes=function(i){if(D(i))i=i.slice();else if(Xe(i)){var t=[];q(i,function(e,a){t.push(a)}),i=t}else return[];return i.sort(function(e,a){return a==="color"&&e!=="color"&&e.indexOf("color")===0?1:-1}),i},n.dependsOn=function(i,t){return t==="color"?!!(i&&i.indexOf(t)===0):i===t},n.findPieceIndex=function(i,t,e){for(var a,r=1/0,o=0,s=t.length;o<s;o++){var l=t[o].value;if(l!=null){if(l===i||qt(l)&&l===i+"")return o;e&&h(l,o)}}for(var o=0,s=t.length;o<s;o++){var c=t[o],p=c.interval,u=c.close;if(p){if(p[0]===-1/0){if(tt(u[1],i,p[1]))return o}else if(p[1]===1/0){if(tt(u[0],p[0],i))return o}else if(tt(u[0],p[0],i)&&tt(u[1],i,p[1]))return o;e&&h(p[0],o),e&&h(p[1],o)}}if(e)return i===1/0?t.length-1:i===-1/0?0:a;function h(v,f){var g=Math.abs(v-i);g<r&&(r=g,a=f)}},n.visualHandlers={color:{applyVisual:W("color"),getColorMapper:function(){var i=this.option;return C(i.mappingMethod==="category"?function(t,e){return!e&&(t=this._normalizeData(t)),Z.call(this,t)}:function(t,e,a){var r=!!a;return!e&&(t=this._normalizeData(t)),a=vt(t,i.parsedVisual,a),r?a:ht(a,"rgba")},this)},_normalizedToVisual:{linear:function(i){return ht(vt(i,this.option.parsedVisual),"rgba")},category:Z,piecewise:function(i,t){var e=Vt.call(this,t);return e==null&&(e=ht(vt(i,this.option.parsedVisual),"rgba")),e},fixed:E}},colorHue:j(function(i,t){return ft(i,t)}),colorSaturation:j(function(i,t){return ft(i,null,t)}),colorLightness:j(function(i,t){return ft(i,null,null,t)}),colorAlpha:j(function(i,t){return de(i,t)}),decal:{applyVisual:W("decal"),_normalizedToVisual:{linear:null,category:Z,piecewise:null,fixed:null}},opacity:{applyVisual:W("opacity"),_normalizedToVisual:xt([0,1])},liftZ:{applyVisual:W("liftZ"),_normalizedToVisual:{linear:E,category:E,piecewise:E,fixed:E}},symbol:{applyVisual:function(i,t,e){var a=this.mapValueToVisual(i);e("symbol",a)},_normalizedToVisual:{linear:Tt,category:Z,piecewise:function(i,t){var e=Vt.call(this,t);return e==null&&(e=Tt.call(this,i)),e},fixed:E}},symbolSize:{applyVisual:W("symbolSize"),_normalizedToVisual:xt([0,1])}},n}();function qe(n){var i=n.pieceList;n.hasSpecialVisual=!1,S(i,function(t,e){t.originIndex=e,t.visual!=null&&(n.hasSpecialVisual=!0)})}function Ye(n){var i=n.categories,t=n.categoryMap={},e=n.visual;if(q(i,function(o,s){t[o]=s}),!D(e)){var a=[];B(e)?q(e,function(o,s){var l=t[s];a[l??nt]=o}):a[nt]=e,e=jt(n,a)}for(var r=i.length-1;r>=0;r--)e[r]==null&&(delete t[i[r]],i.pop())}function yt(n,i){var t=n.visual,e=[];B(t)?q(t,function(r){e.push(r)}):t!=null&&e.push(t);var a={color:1,symbol:1};!i&&e.length===1&&!a.hasOwnProperty(n.type)&&(e[1]=e[0]),jt(n,e)}function j(n){return{applyVisual:function(i,t,e){var a=this.mapValueToVisual(i);e("color",n(t("color"),a))},_normalizedToVisual:xt([0,1])}}function Tt(n){var i=this.option.visual;return i[Math.round(G(n,[0,1],[0,i.length-1],!0))]||{}}function W(n){return function(i,t,e){e(n,this.mapValueToVisual(i))}}function Z(n){var i=this.option.visual;return i[this.option.loop&&n!==nt?n%i.length:n]}function E(){return this.option.visual[0]}function xt(n){return{linear:function(i){return G(i,n,this.option.visual,!0)},category:Z,piecewise:function(i,t){var e=Vt.call(this,t);return e==null&&(e=G(i,n,this.option.visual,!0)),e},fixed:E}}function Vt(n){var i=this.option,t=i.pieceList;if(i.hasSpecialVisual){var e=z.findPieceIndex(n,t),a=t[e];if(a&&a.visual)return a.visual[this.type]}}function jt(n,i){return n.visual=i,n.type==="color"&&(n.parsedVisual=st(i,function(t){var e=fe(t);return e||[0,0,0,1]})),i}var Je={linear:function(n){return G(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var i=this.option.pieceList,t=z.findPieceIndex(n,i,!0);if(t!=null)return G(t,[0,i.length-1],[0,1],!0)},category:function(n){var i=this.option.categories?this.option.categoryMap[n]:n;return i??nt},fixed:he};function tt(n,i,t){return n?i<=t:i<t}function Qe(n,i,t,e,a,r){n=n||0;var o=t[1]-t[0];if(a!=null&&(a=F(a,[0,o])),r!=null&&(r=Math.max(r,a??0)),e==="all"){var s=Math.abs(i[1]-i[0]);s=F(s,[0,o]),a=r=F(s,[a,r]),e=0}i[0]=F(i[0],t),i[1]=F(i[1],t);var l=mt(i,e);i[e]+=n;var c=a||0,p=t.slice();l.sign<0?p[0]+=c:p[1]-=c,i[e]=F(i[e],p);var u;return u=mt(i,e),a!=null&&(u.sign!==l.sign||u.span<a)&&(i[1-e]=i[e]+l.sign*a),u=mt(i,e),r!=null&&u.span>r&&(i[1-e]=i[e]+u.sign*r),i}function mt(n,i){var t=n[i]-n[1-i];return{span:Math.abs(t),sign:t>0?-1:t<0?1:i?-1:1}}function F(n,i){return Math.min(i[1]!=null?i[1]:1/0,Math.max(i[0]!=null?i[0]:-1/0,n))}var je=256,ti=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var i=zt.createCanvas();this.canvas=i}return n.prototype.update=function(i,t,e,a,r,o){var s=this._getBrush(),l=this._getGradient(r,"inRange"),c=this._getGradient(r,"outOfRange"),p=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),v=i.length;u.width=t,u.height=e;for(var f=0;f<v;++f){var g=i[f],d=g[0],m=g[1],M=g[2],y=a(M);h.globalAlpha=y,h.drawImage(s,d-p,m-p)}if(!u.width||!u.height)return u;for(var V=h.getImageData(0,0,u.width,u.height),b=V.data,_=0,H=b.length,L=this.minOpacity,A=this.maxOpacity,I=A-L;_<H;){var y=b[_+3]/256,x=Math.floor(y*(je-1))*4;if(y>0){var w=o(y)?l:c;y>0&&(y=y*I+L),b[_++]=w[x],b[_++]=w[x+1],b[_++]=w[x+2],b[_++]=w[x+3]*y*256}else _+=4}return h.putImageData(V,0,0),u},n.prototype._getBrush=function(){var i=this._brushCanvas||(this._brushCanvas=zt.createCanvas()),t=this.pointSize+this.blurSize,e=t*2;i.width=e,i.height=e;var a=i.getContext("2d");return a.clearRect(0,0,e,e),a.shadowOffsetX=e,a.shadowBlur=this.blurSize,a.shadowColor="#000",a.beginPath(),a.arc(-t,t,this.pointSize,0,Math.PI*2,!0),a.closePath(),a.fill(),i},n.prototype._getGradient=function(i,t){for(var e=this._gradientPixels,a=e[t]||(e[t]=new Uint8ClampedArray(256*4)),r=[0,0,0,0],o=0,s=0;s<256;s++)i[t](s/255,!0,r),a[o++]=r[0],a[o++]=r[1],a[o++]=r[2],a[o++]=r[3];return a},n}();function ei(n,i,t){var e=n[1]-n[0];i=st(i,function(o){return{interval:[(o.interval[0]-n[0])/e,(o.interval[1]-n[0])/e]}});var a=i.length,r=0;return function(o){var s;for(s=r;s<a;s++){var l=i[s].interval;if(l[0]<=o&&o<=l[1]){r=s;break}}if(s===a)for(s=r-1;s>=0;s--){var l=i[s].interval;if(l[0]<=o&&o<=l[1]){r=s;break}}return s>=0&&s<a&&t[s]}}function ii(n,i){var t=n[1]-n[0];return i=[(i[0]-n[0])/t,(i[1]-n[0])/t],function(e){return e>=i[0]&&e<=i[1]}}function Dt(n){var i=n.dimensions;return i[0]==="lng"&&i[1]==="lat"}var ai=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.render=function(t,e,a){var r;e.eachComponent("visualMap",function(s){s.eachTargetSeries(function(l){l===t&&(r=s)})}),this._progressiveEls=null,this.group.removeAll();var o=t.coordinateSystem;o.type==="cartesian2d"||o.type==="calendar"?this._renderOnCartesianAndCalendar(t,a,0,t.getData().count()):Dt(o)&&this._renderOnGeo(o,t,r,a)},i.prototype.incrementalPrepareRender=function(t,e,a){this.group.removeAll()},i.prototype.incrementalRender=function(t,e,a,r){var o=e.coordinateSystem;o&&(Dt(o)?this.render(e,a,r):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,r,t.start,t.end,!0)))},i.prototype.eachRendered=function(t){ge(this._progressiveEls||this.group,t)},i.prototype._renderOnCartesianAndCalendar=function(t,e,a,r,o){var s=t.coordinateSystem,l=ye(s,"cartesian2d"),c,p,u,h;if(l){var v=s.getAxis("x"),f=s.getAxis("y");c=v.getBandWidth()+.5,p=f.getBandWidth()+.5,u=v.scale.getExtent(),h=f.scale.getExtent()}for(var g=this.group,d=t.getData(),m=t.getModel(["emphasis","itemStyle"]).getItemStyle(),M=t.getModel(["blur","itemStyle"]).getItemStyle(),y=t.getModel(["select","itemStyle"]).getItemStyle(),V=t.get(["itemStyle","borderRadius"]),b=Ct(t),_=t.getModel("emphasis"),H=_.get("focus"),L=_.get("blurScope"),A=_.get("disabled"),I=l?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],x=a;x<r;x++){var w=void 0,lt=d.getItemVisual(x,"style");if(l){var Y=d.get(I[0],x),J=d.get(I[1],x);if(isNaN(d.get(I[2],x))||isNaN(Y)||isNaN(J)||Y<u[0]||Y>u[1]||J<h[0]||J>h[1])continue;var wt=s.dataToPoint([Y,J]);w=new at({shape:{x:wt[0]-c/2,y:wt[1]-p/2,width:c,height:p},style:lt})}else{if(isNaN(d.get(I[1],x)))continue;w=new at({z2:1,shape:s.dataToRect([d.get(I[0],x)]).contentShape,style:lt})}if(d.hasItemOption){var U=d.getItemModel(x),Q=U.getModel("emphasis");m=Q.getModel("itemStyle").getItemStyle(),M=U.getModel(["blur","itemStyle"]).getItemStyle(),y=U.getModel(["select","itemStyle"]).getItemStyle(),V=U.get(["itemStyle","borderRadius"]),H=Q.get("focus"),L=Q.get("blurScope"),A=Q.get("disabled"),b=Ct(U)}w.shape.r=V;var ut=t.getRawValue(x),It="-";ut&&ut[2]!=null&&(It=ut[2]+""),me(w,b,{labelFetcher:t,labelDataIndex:x,defaultOpacity:lt.opacity,defaultText:It}),w.ensureState("emphasis").style=m,w.ensureState("blur").style=M,w.ensureState("select").style=y,Se(w,H,L,A),w.incremental=o,o&&(w.states.emphasis.hoverLayer=!0),g.add(w),d.setItemGraphicEl(x,w),this._progressiveEls&&this._progressiveEls.push(w)}},i.prototype._renderOnGeo=function(t,e,a,r){var o=a.targetVisuals.inRange,s=a.targetVisuals.outOfRange,l=e.getData(),c=this._hmLayer||this._hmLayer||new ti;c.blurSize=e.get("blurSize"),c.pointSize=e.get("pointSize"),c.minOpacity=e.get("minOpacity"),c.maxOpacity=e.get("maxOpacity");var p=t.getViewRect().clone(),u=t.getRoamTransform();p.applyTransform(u);var h=Math.max(p.x,0),v=Math.max(p.y,0),f=Math.min(p.width+p.x,r.getWidth()),g=Math.min(p.height+p.y,r.getHeight()),d=f-h,m=g-v,M=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],y=l.mapArray(M,function(H,L,A){var I=t.dataToPoint([H,L]);return I[0]-=h,I[1]-=v,I.push(A),I}),V=a.getExtent(),b=a.type==="visualMap.continuous"?ii(V,a.option.range):ei(V,a.getPieceList(),a.option.selected);c.update(y,d,m,o.color.getNormalizer(),{inRange:o.color.getColorMapper(),outOfRange:s.color.getColorMapper()},b);var _=new Yt({style:{width:d,height:m,x:h,y:v,image:c.canvas},silent:!0});this.group.add(_)},i.type="heatmap",i}(_e),ri=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.getInitialData=function(t,e){return Me(null,this,{generateCoord:"value"})},i.prototype.preventIncremental=function(){var t=be.get(this.get("coordinateSystem"));if(t&&t.dimensions)return t.dimensions[0]==="lng"&&t.dimensions[1]==="lat"},i.type="series.heatmap",i.dependencies=["grid","geo","calendar"],i.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},i}(xe);function ni(n){n.registerChartView(ai),n.registerSeriesModel(ri)}var Ht=S;function At(n){if(n){for(var i in n)if(n.hasOwnProperty(i))return!0}}function kt(n,i,t){var e={};return Ht(i,function(r){var o=e[r]=a();Ht(n[r],function(s,l){if(z.isValidType(l)){var c={type:l,visual:s};t&&t(c,r),o[l]=new z(c),l==="opacity"&&(c=T(c),c.type="colorAlpha",o.__hidden.__alphaForOpacity=new z(c))}})}),e;function a(){var r=function(){};r.prototype.__hidden=r.prototype;var o=new r;return o}}function oi(n,i,t){var e;S(t,function(a){i.hasOwnProperty(a)&&At(i[a])&&(e=!0)}),e&&S(t,function(a){i.hasOwnProperty(a)&&At(i[a])?n[a]=T(i[a]):delete n[a]})}function si(n,i,t,e){var a={};return S(n,function(r){var o=z.prepareVisualTypes(i[r]);a[r]=o}),{progress:function(o,s){var l;e!=null&&(l=s.getDimensionIndex(e));function c(b){return Ve(s,u,b)}function p(b,_){we(s,u,b,_)}for(var u,h=s.getStore();(u=o.next())!=null;){var v=s.getRawDataItem(u);if(!(v&&v.visualMap===!1))for(var f=e!=null?h.get(l,u):u,g=t(f),d=i[g],m=a[g],M=0,y=m.length;M<y;M++){var V=m[M];d[V]&&d[V].applyVisual(f,c,p)}}}}}var te={get:function(n,i,t){var e=T((li[n]||{})[i]);return t&&D(e)?e[e.length-1]:e}},li={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Pt=z.mapVisual,ui=z.eachVisual,pi=D,Et=S,ci=Jt,hi=G,ot=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return i.prototype.init=function(t,e,a){this.mergeDefaultAndTheme(t,a)},i.prototype.optionUpdated=function(t,e){var a=this.option;!e&&oi(a,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},i.prototype.resetVisual=function(t){var e=this.stateList;t=C(t,this),this.controllerVisuals=kt(this.option.controller,e,t),this.targetVisuals=kt(this.option.target,e,t)},i.prototype.getItemSymbol=function(){return null},i.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return t==null||t==="all"?this.ecModel.eachSeries(function(a,r){e.push(r)}):e=Ie(t),e},i.prototype.eachTargetSeries=function(t,e){S(this.getTargetSeriesIndices(),function(a){var r=this.ecModel.getSeriesByIndex(a);r&&t.call(e,r)},this)},i.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries(function(a){a===t&&(e=!0)}),e},i.prototype.formatValueText=function(t,e,a){var r=this.option,o=r.precision,s=this.dataBound,l=r.formatter,c;a=a||["<",">"],D(t)&&(t=t.slice(),c=!0);var p=e?t:c?[u(t[0]),u(t[1])]:u(t);if(qt(l))return l.replace("{value}",c?p[0]:p).replace("{value2}",c?p[1]:p);if(ze(l))return c?l(t[0],t[1]):l(t);if(c)return t[0]===s[0]?a[0]+" "+p[1]:t[1]===s[1]?a[1]+" "+p[0]:p[0]+" - "+p[1];return p;function u(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(o,20))}},i.prototype.resetExtent=function(){var t=this.option,e=ci([t.min,t.max]);this._dataExtent=e},i.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(e!=null)return t.getDimensionIndex(e);for(var a=t.dimensions,r=a.length-1;r>=0;r--){var o=a[r],s=t.getDimensionInfo(o);if(!s.isCalculationCoord)return s.storeDimIndex}},i.prototype.getExtent=function(){return this._dataExtent.slice()},i.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,a={inRange:e.inRange,outOfRange:e.outOfRange},r=e.target||(e.target={}),o=e.controller||(e.controller={});Rt(r,a),Rt(o,a);var s=this.isCategory();l.call(this,r),l.call(this,o),c.call(this,r,"inRange","outOfRange"),p.call(this,o);function l(u){pi(e.color)&&!u.inRange&&(u.inRange={color:e.color.slice().reverse()}),u.inRange=u.inRange||{color:t.get("gradientColor")}}function c(u,h,v){var f=u[h],g=u[v];f&&!g&&(g=u[v]={},Et(f,function(d,m){if(z.isValidType(m)){var M=te.get(m,"inactive",s);M!=null&&(g[m]=M,m==="color"&&!g.hasOwnProperty("opacity")&&!g.hasOwnProperty("colorAlpha")&&(g.opacity=[0,0]))}}))}function p(u){var h=(u.inRange||{}).symbol||(u.outOfRange||{}).symbol,v=(u.inRange||{}).symbolSize||(u.outOfRange||{}).symbolSize,f=this.get("inactiveColor"),g=this.getItemSymbol(),d=g||"roundRect";Et(this.stateList,function(m){var M=this.itemSize,y=u[m];y||(y=u[m]={color:s?f:[f]}),y.symbol==null&&(y.symbol=h&&T(h)||(s?d:[d])),y.symbolSize==null&&(y.symbolSize=v&&T(v)||(s?M[0]:[M[0],M[0]])),y.symbol=Pt(y.symbol,function(_){return _==="none"?d:_});var V=y.symbolSize;if(V!=null){var b=-1/0;ui(V,function(_){_>b&&(b=_)}),y.symbolSize=Pt(V,function(_){return hi(_,[0,b],[0,M[0]],!0)})}},this)}},i.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},i.prototype.isCategory=function(){return!!this.option.categories},i.prototype.setSelected=function(t){},i.prototype.getSelected=function(){return null},i.prototype.getValueState=function(t){return null},i.prototype.getVisualMeta=function(t){return null},i.type="visualMap",i.dependencies=["series"],i.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},i}(Ce),Bt=[20,140],vi=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.optionUpdated=function(t,e){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(a){a.mappingMethod="linear",a.dataExtent=this.getExtent()}),this._resetRange()},i.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(t[0]==null||isNaN(t[0]))&&(t[0]=Bt[0]),(t[1]==null||isNaN(t[1]))&&(t[1]=Bt[1])},i.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):D(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},i.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),S(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)},this)},i.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},i.prototype.getSelected=function(){var t=this.getExtent(),e=Jt((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},i.prototype.getValueState=function(t){var e=this.option.range,a=this.getExtent();return(e[0]<=a[0]||e[0]<=t)&&(e[1]>=a[1]||t<=e[1])?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries(function(a){var r=[],o=a.getData();o.each(this.getDataDimensionIndex(o),function(s,l){t[0]<=s&&s<=t[1]&&r.push(l)},this),e.push({seriesId:a.id,dataIndex:r})},this),e},i.prototype.getVisualMeta=function(t){var e=Gt(this,"outOfRange",this.getExtent()),a=Gt(this,"inRange",this.option.range.slice()),r=[];function o(v,f){r.push({value:v,color:t(v,f)})}for(var s=0,l=0,c=a.length,p=e.length;l<p&&(!a.length||e[l]<=a[0]);l++)e[l]<a[s]&&o(e[l],"outOfRange");for(var u=1;s<c;s++,u=0)u&&r.length&&o(a[s],"outOfRange"),o(a[s],"inRange");for(var u=1;l<p;l++)(!a.length||a[a.length-1]<e[l])&&(u&&(r.length&&o(r[r.length-1].value,"outOfRange"),u=0),o(e[l],"outOfRange"));var h=r.length;return{stops:r,outerColors:[h?r[0].color:"transparent",h?r[h-1].color:"transparent"]}},i.type="visualMap.continuous",i.defaultOption=Qt(ot.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),i}(ot);function Gt(n,i,t){if(t[0]===t[1])return t.slice();for(var e=200,a=(t[1]-t[0])/e,r=t[0],o=[],s=0;s<=e&&r<t[1];s++)o.push(r),r+=a;return o.push(t[1]),o}var ee=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return i.prototype.init=function(t,e){this.ecModel=t,this.api=e},i.prototype.render=function(t,e,a,r){if(this.visualMapModel=t,t.get("show")===!1){this.group.removeAll();return}this.doRender(t,e,a,r)},i.prototype.renderBackground=function(t){var e=this.visualMapModel,a=Re(e.get("padding")||0),r=t.getBoundingRect();t.add(new at({z2:-1,silent:!0,shape:{x:r.x-a[3],y:r.y-a[0],width:r.width+a[3]+a[1],height:r.height+a[0]+a[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},i.prototype.getControllerVisual=function(t,e,a){a=a||{};var r=a.forceState,o=this.visualMapModel,s={};if(e==="color"){var l=o.get("contentColor");s.color=l}function c(v){return s[v]}function p(v,f){s[v]=f}var u=o.controllerVisuals[r||o.getValueState(t)],h=z.prepareVisualTypes(u);return S(h,function(v){var f=u[v];a.convertOpacityToAlpha&&v==="opacity"&&(v="colorAlpha",f=u.__alphaForOpacity),z.dependsOn(v,e)&&f&&f.applyVisual(t,c,p)}),s[e]},i.prototype.positionGroup=function(t){var e=this.visualMapModel,a=this.api;Le(t,e.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})},i.prototype.doRender=function(t,e,a,r){},i.type="visualMap",i}(Oe),Nt=[["left","right","width"],["top","bottom","height"]];function ie(n,i,t){var e=n.option,a=e.align;if(a!=null&&a!=="auto")return a;for(var r={width:i.getWidth(),height:i.getHeight()},o=e.orient==="horizontal"?1:0,s=Nt[o],l=[0,null,10],c={},p=0;p<3;p++)c[Nt[1-o][p]]=l[p],c[s[p]]=p===2?t[0]:e[s[p]];var u=[["x","width",3],["y","height",0]][o],h=Te(c,r,e.padding);return s[(h.margin[u[2]]||0)+h[u[0]]+h[u[1]]*.5<r[u[1]]*.5?0:1]}function it(n,i){return S(n||[],function(t){t.dataIndex!=null&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(i?i.componentIndex:"")}),n}var O=G,fi=S,Ft=Math.min,St=Math.max,di=12,gi=6,yi=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return i.prototype.init=function(t,e){n.prototype.init.call(this,t,e),this._hoverLinkFromSeriesMouseOver=C(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=C(this._hideIndicator,this)},i.prototype.doRender=function(t,e,a,r){(!r||r.type!=="selectDataRange"||r.from!==this.uid)&&this._buildView()},i.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var a=t.get("text");this._renderEndsText(e,a,0),this._renderEndsText(e,a,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},i.prototype._renderEndsText=function(t,e,a){if(e){var r=e[1-a];r=r!=null?r+"":"";var o=this.visualMapModel,s=o.get("textGap"),l=o.itemSize,c=this._shapes.mainGroup,p=this._applyTransform([l[0]/2,a===0?-s:l[1]+s],c),u=this._applyTransform(a===0?"bottom":"top",c),h=this._orient,v=this.visualMapModel.textStyleModel;this.group.add(new X({style:et(v,{x:p[0],y:p[1],verticalAlign:h==="horizontal"?"middle":u,align:h==="horizontal"?u:"center",text:r})}))}},i.prototype._renderBar=function(t){var e=this.visualMapModel,a=this._shapes,r=e.itemSize,o=this._orient,s=this._useHandle,l=ie(e,this.api,r),c=a.mainGroup=this._createBarGroup(l),p=new rt;c.add(p),p.add(a.outOfRange=$t()),p.add(a.inRange=$t(null,s?Kt(this._orient):null,C(this._dragHandle,this,"all",!1),C(this._dragHandle,this,"all",!0))),p.setClipPath(new at({shape:{x:0,y:0,width:r[0],height:r[1],r:3}}));var u=e.textStyleModel.getTextRect("国"),h=St(u.width,u.height);s&&(a.handleThumbs=[],a.handleLabels=[],a.handleLabelPoints=[],this._createHandle(e,c,0,r,h,o),this._createHandle(e,c,1,r,h,o)),this._createIndicator(e,c,r,h,o),t.add(c)},i.prototype._createHandle=function(t,e,a,r,o,s){var l=C(this._dragHandle,this,a,!1),c=C(this._dragHandle,this,a,!0),p=Lt(t.get("handleSize"),r[0]),u=_t(t.get("handleIcon"),-p/2,-p/2,p,p,null,!0),h=Kt(this._orient);u.attr({cursor:h,draggable:!0,drift:l,ondragend:c,onmousemove:function(m){Mt(m.event)}}),u.x=r[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),De(u,!0),e.add(u);var v=this.visualMapModel.textStyleModel,f=new X({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Mt(m.event)},ondragend:c,style:et(v,{x:0,y:0,text:""})});f.ensureState("blur").style={opacity:.1},f.stateTransition={duration:200},this.group.add(f);var g=[p,0],d=this._shapes;d.handleThumbs[a]=u,d.handleLabelPoints[a]=g,d.handleLabels[a]=f},i.prototype._createIndicator=function(t,e,a,r,o){var s=Lt(t.get("indicatorSize"),a[0]),l=_t(t.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:a[0]/2});var c=t.getModel("indicatorStyle").getItemStyle();if(l instanceof Yt){var p=l.style;l.useStyle(He({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},c))}else l.useStyle(c);e.add(l);var u=this.visualMapModel.textStyleModel,h=new X({silent:!0,invisible:!0,style:et(u,{x:0,y:0,text:""})});this.group.add(h);var v=[(o==="horizontal"?r/2:gi)+a[0]/2,0],f=this._shapes;f.indicator=l,f.indicatorLabel=h,f.indicatorLabelPoint=v,this._firstShowIndicator=!0},i.prototype._dragHandle=function(t,e,a,r){if(this._useHandle){if(this._dragging=!e,!e){var o=this._applyTransform([a,r],this._shapes.mainGroup,!0);this._updateInterval(t,o[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():Ut(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},i.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),a=t.getExtent(),r=[0,t.itemSize[1]];this._handleEnds=[O(e[0],a,r,!0),O(e[1],a,r,!0)]},i.prototype._updateInterval=function(t,e){e=e||0;var a=this.visualMapModel,r=this._handleEnds,o=[0,a.itemSize[1]];Qe(e,r,o,t,0);var s=a.getExtent();this._dataInterval=[O(r[0],o,s,!0),O(r[1],o,s,!0)]},i.prototype._updateView=function(t){var e=this.visualMapModel,a=e.getExtent(),r=this._shapes,o=[0,e.itemSize[1]],s=t?o:this._handleEnds,l=this._createBarVisual(this._dataInterval,a,s,"inRange"),c=this._createBarVisual(a,a,o,"outOfRange");r.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),r.outOfRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),this._updateHandle(s,l)},i.prototype._createBarVisual=function(t,e,a,r){var o={forceState:r,convertOpacityToAlpha:!0},s=this._makeColorGradient(t,o),l=[this.getControllerVisual(t[0],"symbolSize",o),this.getControllerVisual(t[1],"symbolSize",o)],c=this._createBarPoints(a,l);return{barColor:new Ae(0,0,0,1,s),barPoints:c,handlesColor:[s[0].color,s[s.length-1].color]}},i.prototype._makeColorGradient=function(t,e){var a=100,r=[],o=(t[1]-t[0])/a;r.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var s=1;s<a;s++){var l=t[0]+o*s;if(l>t[1])break;r.push({color:this.getControllerVisual(l,"color",e),offset:s/a})}return r.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),r},i.prototype._createBarPoints=function(t,e){var a=this.visualMapModel.itemSize;return[[a[0]-e[0],t[0]],[a[0],t[0]],[a[0],t[1]],[a[0]-e[1],t[1]]]},i.prototype._createBarGroup=function(t){var e=this._orient,a=this.visualMapModel.get("inverse");return new rt(e==="horizontal"&&!a?{scaleX:t==="bottom"?1:-1,rotation:Math.PI/2}:e==="horizontal"&&a?{scaleX:t==="bottom"?-1:1,rotation:-Math.PI/2}:e==="vertical"&&!a?{scaleX:t==="left"?1:-1,scaleY:-1}:{scaleX:t==="left"?1:-1})},i.prototype._updateHandle=function(t,e){if(this._useHandle){var a=this._shapes,r=this.visualMapModel,o=a.handleThumbs,s=a.handleLabels,l=r.itemSize,c=r.getExtent(),p=this._applyTransform("left",a.mainGroup);fi([0,1],function(u){var h=o[u];h.setStyle("fill",e.handlesColor[u]),h.y=t[u];var v=O(t[u],[0,l[1]],c,!0),f=this.getControllerVisual(v,"symbolSize");h.scaleX=h.scaleY=f/l[0],h.x=l[0]-f/2;var g=dt(a.handleLabelPoints[u],gt(h,this.group));if(this._orient==="horizontal"){var d=p==="left"||p==="top"?(l[0]-f)/2:(l[0]-f)/-2;g[1]+=d}s[u].setStyle({x:g[0],y:g[1],text:r.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",a.mainGroup):"center"})},this)}},i.prototype._showIndicator=function(t,e,a,r){var o=this.visualMapModel,s=o.getExtent(),l=o.itemSize,c=[0,l[1]],p=this._shapes,u=p.indicator;if(u){u.attr("invisible",!1);var h={convertOpacityToAlpha:!0},v=this.getControllerVisual(t,"color",h),f=this.getControllerVisual(t,"symbolSize"),g=O(t,s,c,!0),d=l[0]-f/2,m={x:u.x,y:u.y};u.y=g,u.x=d;var M=dt(p.indicatorLabelPoint,gt(u,this.group)),y=p.indicatorLabel;y.attr("invisible",!1);var V=this._applyTransform("left",p.mainGroup),b=this._orient,_=b==="horizontal";y.setStyle({text:(a||"")+o.formatValueText(e),verticalAlign:_?V:"middle",align:_?"center":V});var H={x:d,y:g,style:{fill:v}},L={style:{x:M[0],y:M[1]}};if(o.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};u.x=m.x,u.y=m.y,u.animateTo(H,A),y.animateTo(L,A)}else u.attr(H),y.attr(L);this._firstShowIndicator=!1;var I=this._shapes.handleLabels;if(I)for(var x=0;x<I.length;x++)this.api.enterBlur(I[x])}},i.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var a=t.visualMapModel.itemSize,r=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);r[1]=Ft(St(0,r[1]),a[1]),t._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=a[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},i.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},i.prototype._doHoverLinkToSeries=function(t,e){var a=this.visualMapModel,r=a.itemSize;if(a.option.hoverLink){var o=[0,r[1]],s=a.getExtent();t=Ft(St(o[0],t),o[1]);var l=mi(a,s,o),c=[t-l,t+l],p=O(t,o,s,!0),u=[O(c[0],o,s,!0),O(c[1],o,s,!0)];c[0]<o[0]&&(u[0]=-1/0),c[1]>o[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(p,u[1],"< ",l):u[1]===1/0?this._showIndicator(p,u[0],"> ",l):this._showIndicator(p,p,"≈ ",l));var h=this._hoverLinkDataIndices,v=[];(e||Ut(a))&&(v=this._hoverLinkDataIndices=a.findTargetDataIndices(u));var f=ke(h,v);this._dispatchHighDown("downplay",it(f[0],a)),this._dispatchHighDown("highlight",it(f[1],a))}},i.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(Pe(t.target,function(l){var c=Ee(l);if(c.dataIndex!=null)return e=c,!0},!0),!!e){var a=this.ecModel.getSeriesByIndex(e.seriesIndex),r=this.visualMapModel;if(r.isTargetSeries(a)){var o=a.getData(e.dataType),s=o.getStore().get(r.getDataDimensionIndex(o),e.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},i.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var a=0;a<e.length;a++)this.api.leaveBlur(e[a])},i.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",it(t,this.visualMapModel)),t.length=0},i.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},i.prototype._applyTransform=function(t,e,a,r){var o=gt(e,r?null:this.group);return D(t)?dt(t,o,a):Be(t,o,a)},i.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},i.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},i.type="visualMap.continuous",i}(ee);function $t(n,i,t,e){return new Ge({shape:{points:n},draggable:!!t,cursor:i,drift:t,onmousemove:function(a){Mt(a.event)},ondragend:e})}function mi(n,i,t){var e=di/2,a=n.get("hoverLinkDataSize");return a&&(e=O(a,i,t,!0)/2),e}function Ut(n){var i=n.get("hoverLinkOnHandle");return!!(i??n.get("realtime"))}function Kt(n){return n==="vertical"?"ns-resize":"ew-resize"}var Si={type:"selectDataRange",event:"dataRangeSelected",update:"update"},_i=function(n,i){i.eachComponent({mainType:"visualMap",query:n},function(t){t.setSelected(n.selected)})},Mi=[{createOnAllSeries:!0,reset:function(n,i){var t=[];return i.eachComponent("visualMap",function(e){var a=n.pipelineContext;!e.isTargetSeries(n)||a&&a.large||t.push(si(e.stateList,e.targetVisuals,C(e.getValueState,e),e.getDataDimensionIndex(n.getData())))}),t}},{createOnAllSeries:!0,reset:function(n,i){var t=n.getData(),e=[];i.eachComponent("visualMap",function(a){if(a.isTargetSeries(n)){var r=a.getVisualMeta(C(bi,null,n,a))||{stops:[],outerColors:[]},o=a.getDataDimensionIndex(t);o>=0&&(r.dimension=o,e.push(r))}}),n.getData().setVisual("visualMeta",e)}}];function bi(n,i,t,e){for(var a=i.targetVisuals[e],r=z.prepareVisualTypes(a),o={color:Ne(n.getData(),"color")},s=0,l=r.length;s<l;s++){var c=r[s],p=a[c==="opacity"?"__alphaForOpacity":c];p&&p.applyVisual(t,u,h)}return o.color;function u(v){return o[v]}function h(v,f){o[v]=f}}var Wt=S;function xi(n){var i=n&&n.visualMap;D(i)||(i=i?[i]:[]),Wt(i,function(t){if(t){$(t,"splitList")&&!$(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&D(e)&&Wt(e,function(a){B(a)&&($(a,"start")&&!$(a,"min")&&(a.min=a.start),$(a,"end")&&!$(a,"max")&&(a.max=a.end))})}})}function $(n,i){return n&&n.hasOwnProperty&&n.hasOwnProperty(i)}var Zt=!1;function ae(n){Zt||(Zt=!0,n.registerSubTypeDefaulter("visualMap",function(i){return!i.categories&&(!(i.pieces?i.pieces.length>0:i.splitNumber>0)||i.calculable)?"continuous":"piecewise"}),n.registerAction(Si,_i),S(Mi,function(i){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,i)}),n.registerPreprocessor(xi))}function Vi(n){n.registerComponentModel(vi),n.registerComponentView(yi),ae(n)}var wi=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t._pieceList=[],t}return i.prototype.optionUpdated=function(t,e){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var a=this._mode=this._determineMode();this._pieceList=[],Ii[this._mode].call(this,this._pieceList),this._resetSelected(t,e);var r=this.option.categories;this.resetVisual(function(o,s){a==="categories"?(o.mappingMethod="category",o.categories=T(r)):(o.dataExtent=this.getExtent(),o.mappingMethod="piecewise",o.pieceList=st(this._pieceList,function(l){return l=T(l),s!=="inRange"&&(l.visual=null),l}))})},i.prototype.completeVisualOption=function(){var t=this.option,e={},a=z.listVisualTypes(),r=this.isCategory();S(t.pieces,function(s){S(a,function(l){s.hasOwnProperty(l)&&(e[l]=1)})}),S(e,function(s,l){var c=!1;S(this.stateList,function(p){c=c||o(t,p,l)||o(t.target,p,l)},this),!c&&S(this.stateList,function(p){(t[p]||(t[p]={}))[l]=te.get(l,p==="inRange"?"active":"inactive",r)})},this);function o(s,l,c){return s&&s[l]&&s[l].hasOwnProperty(c)}n.prototype.completeVisualOption.apply(this,arguments)},i.prototype._resetSelected=function(t,e){var a=this.option,r=this._pieceList,o=(e?a:t).selected||{};if(a.selected=o,S(r,function(l,c){var p=this.getSelectedMapKey(l);o.hasOwnProperty(p)||(o[p]=!0)},this),a.selectedMode==="single"){var s=!1;S(r,function(l,c){var p=this.getSelectedMapKey(l);o[p]&&(s?o[p]=!1:s=!0)},this)}},i.prototype.getItemSymbol=function(){return this.get("itemSymbol")},i.prototype.getSelectedMapKey=function(t){return this._mode==="categories"?t.value+"":t.index+""},i.prototype.getPieceList=function(){return this._pieceList},i.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},i.prototype.setSelected=function(t){this.option.selected=T(t)},i.prototype.getValueState=function(t){var e=z.findPieceIndex(t,this._pieceList);return e!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},i.prototype.findTargetDataIndices=function(t){var e=[],a=this._pieceList;return this.eachTargetSeries(function(r){var o=[],s=r.getData();s.each(this.getDataDimensionIndex(s),function(l,c){var p=z.findPieceIndex(l,a);p===t&&o.push(c)},this),e.push({seriesId:r.id,dataIndex:o})},this),e},i.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(t.value!=null)e=t.value;else{var a=t.interval||[];e=a[0]===-1/0&&a[1]===1/0?0:(a[0]+a[1])/2}return e},i.prototype.getVisualMeta=function(t){if(this.isCategory())return;var e=[],a=["",""],r=this;function o(p,u){var h=r.getRepresentValue({interval:p});u||(u=r.getValueState(h));var v=t(h,u);p[0]===-1/0?a[0]=v:p[1]===1/0?a[1]=v:e.push({value:p[0],color:v},{value:p[1],color:v})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var c=-1/0;return S(s,function(p){var u=p.interval;u&&(u[0]>c&&o([c,u[0]],"outOfRange"),o(u.slice()),c=u[1])},this),{stops:e,outerColors:a}},i.type="visualMap.piecewise",i.defaultOption=Qt(ot.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),i}(ot),Ii={splitNumber:function(n){var i=this.option,t=Math.min(i.precision,20),e=this.getExtent(),a=i.splitNumber;a=Math.max(parseInt(a,10),1),i.splitNumber=a;for(var r=(e[1]-e[0])/a;+r.toFixed(t)!==r&&t<5;)t++;i.precision=t,r=+r.toFixed(t),i.minOpen&&n.push({interval:[-1/0,e[0]],close:[0,0]});for(var o=0,s=e[0];o<a;s+=r,o++){var l=o===a-1?e[1]:s+r;n.push({interval:[s,l],close:[1,1]})}i.maxOpen&&n.push({interval:[e[1],1/0],close:[0,0]}),Ot(n),S(n,function(c,p){c.index=p,c.text=this.formatValueText(c.interval)},this)},categories:function(n){var i=this.option;S(i.categories,function(t){n.push({text:this.formatValueText(t,!0),value:t})},this),Xt(i,n)},pieces:function(n){var i=this.option;S(i.pieces,function(t,e){B(t)||(t={value:t});var a={text:"",index:e};if(t.label!=null&&(a.text=t.label),t.hasOwnProperty("value")){var r=a.value=t.value;a.interval=[r,r],a.close=[1,1]}else{for(var o=a.interval=[],s=a.close=[0,0],l=[1,0,1],c=[-1/0,1/0],p=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],v=0;v<3&&o[u]==null;v++)o[u]=t[h[v]],s[u]=l[v],p[u]=v===2;o[u]==null&&(o[u]=c[u])}p[0]&&o[1]===1/0&&(s[0]=0),p[1]&&o[0]===-1/0&&(s[1]=0),o[0]===o[1]&&s[0]&&s[1]&&(a.value=o[0])}a.visual=z.retrieveVisuals(t),n.push(a)},this),Xt(i,n),Ot(n),S(n,function(t){var e=t.close,a=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(t.value!=null?t.value:t.interval,!1,a)},this)}};function Xt(n,i){var t=n.inverse;(n.orient==="vertical"?!t:t)&&i.reverse()}var zi=function(n){k(i,n);function i(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=i.type,t}return i.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,a=e.get("textGap"),r=e.textStyleModel,o=r.getFont(),s=r.getTextColor(),l=this._getItemAlign(),c=e.itemSize,p=this._getViewData(),u=p.endsText,h=Fe(e.get("showLabel",!0),!u),v=!e.get("selectedMode");u&&this._renderEndsText(t,u[0],c,h,l),S(p.viewPieceList,function(f){var g=f.piece,d=new rt;d.onclick=C(this._onItemClick,this,g),this._enableHoverLink(d,f.indexInModelPieceList);var m=e.getRepresentValue(g);if(this._createItemSymbol(d,m,[0,0,c[0],c[1]],v),h){var M=this.visualMapModel.getValueState(m);d.add(new X({style:{x:l==="right"?-a:c[0]+a,y:c[1]/2,text:g.text,verticalAlign:"middle",align:l,font:o,fill:s,opacity:M==="outOfRange"?.5:1},silent:v}))}t.add(d)},this),u&&this._renderEndsText(t,u[1],c,h,l),$e(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},i.prototype._enableHoverLink=function(t,e){var a=this;t.on("mouseover",function(){return r("highlight")}).on("mouseout",function(){return r("downplay")});var r=function(o){var s=a.visualMapModel;s.option.hoverLink&&a.api.dispatchAction({type:o,batch:it(s.findTargetDataIndices(e),s)})}},i.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if(e.orient==="vertical")return ie(t,this.api,t.itemSize);var a=e.align;return(!a||a==="auto")&&(a="left"),a},i.prototype._renderEndsText=function(t,e,a,r,o){if(e){var s=new rt,l=this.visualMapModel.textStyleModel;s.add(new X({style:et(l,{x:r?o==="right"?a[0]:0:a[0]/2,y:a[1]/2,verticalAlign:"middle",align:r?o:"center",text:e})})),t.add(s)}},i.prototype._getViewData=function(){var t=this.visualMapModel,e=st(t.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),a=t.get("text"),r=t.get("orient"),o=t.get("inverse");return(r==="horizontal"?o:!o)?e.reverse():a&&(a=a.slice().reverse()),{viewPieceList:e,endsText:a}},i.prototype._createItemSymbol=function(t,e,a,r){var o=_t(this.getControllerVisual(e,"symbol"),a[0],a[1],a[2],a[3],this.getControllerVisual(e,"color"));o.silent=r,t.add(o)},i.prototype._onItemClick=function(t){var e=this.visualMapModel,a=e.option,r=a.selectedMode;if(r){var o=T(a.selected),s=e.getSelectedMapKey(t);r==="single"||r===!0?(o[s]=!0,S(o,function(l,c){o[c]=c===s})):o[s]=!o[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}},i.type="visualMap.piecewise",i}(ee);function Ci(n){n.registerComponentModel(wi),n.registerComponentView(zi),ae(n)}function Ri(n){bt(Vi),bt(Ci)}const Li={class:"page-header flex-between"},Oi={class:"card-section"},Ti={class:"card-section"},Di={__name:"InventoryMonitoring",setup(n){bt([ni,Ke,Ri,We,Ze]);const i=pt(null),t=pt("overview"),e=pt([]);let a;const r=oe(()=>t.value==="overview"?e.value.slice(0,5):e.value.filter(c=>c.quantity<c.safetyStock)),o=c=>{a=a??Ue(i.value),a.setOption({tooltip:{position:"top"},grid:{height:"70%",top:"10%"},xAxis:{type:"category",data:["A区","B区","C区","D区","E区"],splitArea:{show:!0}},yAxis:{type:"category",data:["货架1","货架2","货架3","货架4"],splitArea:{show:!0}},visualMap:{min:0,max:100,calculable:!0,orient:"horizontal",left:"center",bottom:"0%"},series:[{name:"库存充足率",type:"heatmap",data:c,label:{show:!0},emphasis:{itemStyle:{shadowBlur:10,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})},s=async()=>{const c=await re.listInventory();e.value=c;const p=[],u=["A区","B区","C区","D区","E区"],h=["货架1","货架2","货架3","货架4"];u.forEach((v,f)=>{h.forEach((g,d)=>{const m=Math.round(40+Math.random()*60);p.push([f,d,m])})}),o(p)},l=()=>{a==null||a.resize()};return se(()=>{s(),window.addEventListener("resize",l)}),le(()=>{window.removeEventListener("resize",l),a==null||a.dispose()}),(c,p)=>{const u=K("el-radio-button"),h=K("el-radio-group"),v=K("el-table-column"),f=K("el-tag"),g=K("el-table");return pe(),ue("div",null,[P("div",Li,[p[3]||(p[3]=P("h2",null,"库存监控看板",-1)),R(h,{modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=d=>t.value=d)},{default:N(()=>[R(u,{label:"overview"},{default:N(()=>[...p[1]||(p[1]=[ct("概览",-1)])]),_:1}),R(u,{label:"alert"},{default:N(()=>[...p[2]||(p[2]=[ct("预警",-1)])]),_:1})]),_:1},8,["modelValue"])]),P("section",Oi,[p[4]||(p[4]=P("h3",null,"库区温度图",-1)),P("div",{ref_key:"heatmapRef",ref:i,class:"chart"},null,512)]),P("section",Ti,[p[6]||(p[6]=P("h3",null,"预警列表",-1)),R(g,{data:r.value,border:"",stripe:""},{default:N(()=>[R(v,{prop:"sku",label:"SKU",width:"140"}),R(v,{prop:"name",label:"物料"}),R(v,{prop:"warehouse",label:"仓库",width:"120"}),R(v,{prop:"quantity",label:"当前库存",width:"120"}),R(v,{prop:"safetyStock",label:"安全库存",width:"120"}),R(v,{label:"状态",width:"120"},{default:N(()=>[R(f,{type:"danger"},{default:N(()=>[...p[5]||(p[5]=[ct("低库存",-1)])]),_:1})]),_:1})]),_:1},8,["data"])])])}}},Pi=ne(Di,[["__scopeId","data-v-291cb115"]]);export{Pi as default};
