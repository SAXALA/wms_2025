import{_ as B,c as fe,G as Q,ax as ot,f as ge,aL as Ot,k as Lt,aM as pe,aN as me,u as at,s as ye,n as ct,z as wt,aO as de,an as be,y as lt,A as kt,E as bt,v as M,aP as Rt,aQ as Se,t as _e,ac as De,m as vt,aR as st,j as Gt,aS as K,aT as Pe,aU as Nt,aV as Et,g as te,aW as nt,x as Ie,R as ht,as as Z,X as ee,aX as zt,d as St,F as xt,aY as Vt,C as gt,aZ as Ft,Z as ut,a_ as Ae,o as Ce,e as F,aA as Le,w as we,S as Bt,a$ as ke,b0 as Ge,ad as rt,av as Te,au as Oe,b1 as Re,b2 as ae,b3 as Ne,b4 as Ee,b5 as ze,a2 as xe,O as Wt,I as J,aj as Ve,ae as Fe,b6 as Ht,a3 as Be,b7 as We,aK as et,a5 as He,b8 as Ue,b9 as Xe,ba as $e,i as Ze,bb as je,bc as qe,ag as Je,r as Ke,a6 as _t}from"./installCanvasRenderer-CjKD-AXp.js";var Me=function(n){B(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t){return fe(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var a=new Q,i=ot("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);a.add(i),i.setStyle(t.lineStyle);var r=this.getData().getVisual("symbol"),o=this.getData().getVisual("symbolRotate"),l=r==="none"?"circle":r,u=t.itemHeight*.8,s=ot(l,(t.itemWidth-u)/2,(t.itemHeight-u)/2,u,u,t.itemStyle.fill);a.add(s),s.setStyle(t.itemStyle);var c=t.iconRotate==="inherit"?o:t.iconRotate||0;return s.rotation=c*Math.PI/180,s.setOrigin([t.itemWidth/2,t.itemHeight/2]),l.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),a},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ge);function re(n,e){var t=n.mapDimensionsAll("defaultedLabel"),a=t.length;if(a===1){var i=Ot(n,e,t[0]);return i!=null?i+"":null}else if(a){for(var r=[],o=0;o<t.length;o++)r.push(Ot(n,e,t[o]));return r.join(" ")}}function Qe(n,e){var t=n.mapDimensionsAll("defaultedLabel");if(!Lt(e))return e+"";for(var a=[],i=0;i<t.length;i++){var r=n.getDimensionIndex(t[i]);r>=0&&a.push(e[r])}return a.join(" ")}var Tt=function(n){B(e,n);function e(t,a,i,r){var o=n.call(this)||this;return o.updateData(t,a,i,r),o}return e.prototype._createSymbol=function(t,a,i,r,o){this.removeAll();var l=ot(t,-1,-1,2,2,null,o);l.attr({z2:100,culling:!0,scaleX:r[0]/2,scaleY:r[1]/2}),l.drift=Ye,this._symbolType=t,this.add(l)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){pe(this.childAt(0))},e.prototype.downplay=function(){me(this.childAt(0))},e.prototype.setZ=function(t,a){var i=this.childAt(0);i.zlevel=t,i.z=a},e.prototype.setDraggable=function(t,a){var i=this.childAt(0);i.draggable=t,i.cursor=!a&&t?"move":i.cursor},e.prototype.updateData=function(t,a,i,r){this.silent=!1;var o=t.getItemVisual(a,"symbol")||"circle",l=t.hostModel,u=e.getSymbolSize(t,a),s=o!==this._symbolType,c=r&&r.disableAnimation;if(s){var v=t.getItemVisual(a,"symbolKeepAspect");this._createSymbol(o,t,a,u,v)}else{var f=this.childAt(0);f.silent=!1;var h={scaleX:u[0]/2,scaleY:u[1]/2};c?f.attr(h):at(f,h,l,a),ye(f)}if(this._updateCommon(t,a,u,i,r),s){var f=this.childAt(0);if(!c){var h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:f.style.opacity}};f.scaleX=f.scaleY=0,f.style.opacity=0,ct(f,h,l,a)}}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,a,i,r,o){var l=this.childAt(0),u=t.hostModel,s,c,v,f,h,p,g,b,m;if(r&&(s=r.emphasisItemStyle,c=r.blurItemStyle,v=r.selectItemStyle,f=r.focus,h=r.blurScope,g=r.labelStatesModels,b=r.hoverScale,m=r.cursorStyle,p=r.emphasisDisabled),!r||t.hasItemOption){var y=r&&r.itemModel?r.itemModel:t.getItemModel(a),d=y.getModel("emphasis");s=d.getModel("itemStyle").getItemStyle(),v=y.getModel(["select","itemStyle"]).getItemStyle(),c=y.getModel(["blur","itemStyle"]).getItemStyle(),f=d.get("focus"),h=d.get("blurScope"),p=d.get("disabled"),g=wt(y),b=d.getShallow("scale"),m=y.getShallow("cursor")}var P=t.getItemVisual(a,"symbolRotate");l.attr("rotation",(P||0)*Math.PI/180||0);var D=de(t.getItemVisual(a,"symbolOffset"),i);D&&(l.x=D[0],l.y=D[1]),m&&l.attr("cursor",m);var _=t.getItemVisual(a,"style"),S=_.fill;if(l instanceof be){var A=l.style;l.useStyle(lt({image:A.image,x:A.x,y:A.y,width:A.width,height:A.height},_))}else l.__isEmptyBrush?l.useStyle(lt({},_)):l.useStyle(_),l.style.decal=null,l.setColor(S,o&&o.symbolInnerColor),l.style.strokeNoScale=!0;var w=t.getItemVisual(a,"liftZ"),I=this._z2;w!=null?I==null&&(this._z2=l.z2,l.z2+=w):I!=null&&(l.z2=I,this._z2=null);var L=o&&o.useNameLabel;kt(l,g,{labelFetcher:u,labelDataIndex:a,defaultText:C,inheritColor:S,defaultOpacity:_.opacity});function C(G){return L?t.getName(G):re(t,G)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var k=l.ensureState("emphasis");k.style=s,l.ensureState("select").style=v,l.ensureState("blur").style=c;var T=b==null||b===!0?Math.max(1.1,3/this._sizeY):isFinite(b)&&b>0?+b:1;k.scaleX=this._sizeX*T,k.scaleY=this._sizeY*T,this.setSymbolScale(1),bt(this,f,h,p)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,a,i){var r=this.childAt(0),o=M(this).dataIndex,l=i&&i.animation;if(this.silent=r.silent=!0,i&&i.fadeLabel){var u=r.getTextContent();u&&Rt(u,{style:{opacity:0}},a,{dataIndex:o,removeOpt:l,cb:function(){r.removeTextContent()}})}else r.removeTextContent();Rt(r,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:o,cb:t,removeOpt:l})},e.getSymbolSize=function(t,a){return Se(t.getItemVisual(a,"symbolSize"))},e}(Q);function Ye(n,e){this.parent.drift(n,e)}function pt(n,e,t,a){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(a.isIgnore&&a.isIgnore(t))&&!(a.clipShape&&!a.clipShape.contain(e[0],e[1]))&&n.getItemVisual(t,"symbol")!=="none"}function Ut(n){return n!=null&&!De(n)&&(n={isIgnore:n}),n||{}}function Xt(n){var e=n.hostModel,t=e.getModel("emphasis");return{emphasisItemStyle:t.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:t.get("focus"),blurScope:t.get("blurScope"),emphasisDisabled:t.get("disabled"),hoverScale:t.get("scale"),labelStatesModels:wt(e),cursorStyle:e.get("cursor")}}var ta=function(){function n(e){this.group=new Q,this._SymbolCtor=e||Tt}return n.prototype.updateData=function(e,t){this._progressiveEls=null,t=Ut(t);var a=this.group,i=e.hostModel,r=this._data,o=this._SymbolCtor,l=t.disableAnimation,u=Xt(e),s={disableAnimation:l},c=t.getSymbolPoint||function(v){return e.getItemLayout(v)};r||a.removeAll(),e.diff(r).add(function(v){var f=c(v);if(pt(e,f,v,t)){var h=new o(e,v,u,s);h.setPosition(f),e.setItemGraphicEl(v,h),a.add(h)}}).update(function(v,f){var h=r.getItemGraphicEl(f),p=c(v);if(!pt(e,p,v,t)){a.remove(h);return}var g=e.getItemVisual(v,"symbol")||"circle",b=h&&h.getSymbolType&&h.getSymbolType();if(!h||b&&b!==g)a.remove(h),h=new o(e,v,u,s),h.setPosition(p);else{h.updateData(e,v,u,s);var m={x:p[0],y:p[1]};l?h.attr(m):at(h,m,i)}a.add(h),e.setItemGraphicEl(v,h)}).remove(function(v){var f=r.getItemGraphicEl(v);f&&f.fadeOut(function(){a.remove(f)},i)}).execute(),this._getSymbolPoint=c,this._data=e},n.prototype.updateLayout=function(){var e=this,t=this._data;t&&t.eachItemGraphicEl(function(a,i){var r=e._getSymbolPoint(i);a.setPosition(r),a.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Xt(e),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(e,t,a){this._progressiveEls=[],a=Ut(a);function i(u){u.isGroup||(u.incremental=!0,u.ensureState("emphasis").hoverLayer=!0)}for(var r=e.start;r<e.end;r++){var o=t.getItemLayout(r);if(pt(t,o,r,a)){var l=new this._SymbolCtor(t,r,this._seriesScope);l.traverse(i),l.setPosition(o),this.group.add(l),t.setItemGraphicEl(r,l),this._progressiveEls.push(l)}}},n.prototype.eachRendered=function(e){_e(this._progressiveEls||this.group,e)},n.prototype.remove=function(e){var t=this.group,a=this._data;a&&e?a.eachItemGraphicEl(function(i){i.fadeOut(function(){t.remove(i)},a.hostModel)}):t.removeAll()},n}();function ne(n,e,t){var a=n.getBaseAxis(),i=n.getOtherAxis(a),r=ea(i,t),o=a.dim,l=i.dim,u=e.mapDimension(l),s=e.mapDimension(o),c=l==="x"||l==="radius"?1:0,v=vt(n.dimensions,function(p){return e.mapDimension(p)}),f=!1,h=e.getCalculationInfo("stackResultDimension");return st(e,v[0])&&(f=!0,v[0]=h),st(e,v[1])&&(f=!0,v[1]=h),{dataDimsForPoint:v,valueStart:r,valueAxisDim:l,baseAxisDim:o,stacked:!!f,valueDim:u,baseDim:s,baseDataOffset:c,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function ea(n,e){var t=0,a=n.scale.getExtent();return e==="start"?t=a[0]:e==="end"?t=a[1]:Gt(e)&&!isNaN(e)?t=e:a[0]>0?t=a[0]:a[1]<0&&(t=a[1]),t}function ie(n,e,t,a){var i=NaN;n.stacked&&(i=t.get(t.getCalculationInfo("stackedOverDimension"),a)),isNaN(i)&&(i=n.valueStart);var r=n.baseDataOffset,o=[];return o[r]=t.get(n.baseDim,a),o[1-r]=i,e.dataToPoint(o)}function aa(n,e){var t=[];return e.diff(n).add(function(a){t.push({cmd:"+",idx:a})}).update(function(a,i){t.push({cmd:"=",idx:i,idx1:a})}).remove(function(a){t.push({cmd:"-",idx:a})}).execute(),t}function ra(n,e,t,a,i,r,o,l){for(var u=aa(n,e),s=[],c=[],v=[],f=[],h=[],p=[],g=[],b=ne(i,e,o),m=n.getLayout("points")||[],y=e.getLayout("points")||[],d=0;d<u.length;d++){var P=u[d],D=!0,_=void 0,S=void 0;switch(P.cmd){case"=":_=P.idx*2,S=P.idx1*2;var A=m[_],w=m[_+1],I=y[S],L=y[S+1];(isNaN(A)||isNaN(w))&&(A=I,w=L),s.push(A,w),c.push(I,L),v.push(t[_],t[_+1]),f.push(a[S],a[S+1]),g.push(e.getRawIndex(P.idx1));break;case"+":var C=P.idx,k=b.dataDimsForPoint,T=i.dataToPoint([e.get(k[0],C),e.get(k[1],C)]);S=C*2,s.push(T[0],T[1]),c.push(y[S],y[S+1]);var G=ie(b,i,e,C);v.push(G[0],G[1]),f.push(a[S],a[S+1]),g.push(e.getRawIndex(C));break;case"-":D=!1}D&&(h.push(P),p.push(p.length))}p.sort(function(E,ft){return g[E]-g[ft]});for(var N=s.length,V=K(N),O=K(N),R=K(N),W=K(N),H=[],d=0;d<p.length;d++){var Y=p[d],z=d*2,x=Y*2;V[z]=s[x],V[z+1]=s[x+1],O[z]=c[x],O[z+1]=c[x+1],R[z]=v[x],R[z+1]=v[x+1],W[z]=f[x],W[z+1]=f[x+1],H[d]=h[Y]}return{current:V,next:O,stackedOnCurrent:R,stackedOnNext:W,status:H}}var U=Math.min,X=Math.max;function j(n,e){return isNaN(n)||isNaN(e)}function Dt(n,e,t,a,i,r,o,l,u){for(var s,c,v,f,h,p,g=t,b=0;b<a;b++){var m=e[g*2],y=e[g*2+1];if(g>=i||g<0)break;if(j(m,y)){if(u){g+=r;continue}break}if(g===t)n[r>0?"moveTo":"lineTo"](m,y),v=m,f=y;else{var d=m-s,P=y-c;if(d*d+P*P<.5){g+=r;continue}if(o>0){for(var D=g+r,_=e[D*2],S=e[D*2+1];_===m&&S===y&&b<a;)b++,D+=r,g+=r,_=e[D*2],S=e[D*2+1],m=e[g*2],y=e[g*2+1],d=m-s,P=y-c;var A=b+1;if(u)for(;j(_,S)&&A<a;)A++,D+=r,_=e[D*2],S=e[D*2+1];var w=.5,I=0,L=0,C=void 0,k=void 0;if(A>=a||j(_,S))h=m,p=y;else{I=_-s,L=S-c;var T=m-s,G=_-m,N=y-c,V=S-y,O=void 0,R=void 0;if(l==="x"){O=Math.abs(T),R=Math.abs(G);var W=I>0?1:-1;h=m-W*O*o,p=y,C=m+W*R*o,k=y}else if(l==="y"){O=Math.abs(N),R=Math.abs(V);var H=L>0?1:-1;h=m,p=y-H*O*o,C=m,k=y+H*R*o}else O=Math.sqrt(T*T+N*N),R=Math.sqrt(G*G+V*V),w=R/(R+O),h=m-I*o*(1-w),p=y-L*o*(1-w),C=m+I*o*w,k=y+L*o*w,C=U(C,X(_,m)),k=U(k,X(S,y)),C=X(C,U(_,m)),k=X(k,U(S,y)),I=C-m,L=k-y,h=m-I*O/R,p=y-L*O/R,h=U(h,X(s,m)),p=U(p,X(c,y)),h=X(h,U(s,m)),p=X(p,U(c,y)),I=m-h,L=y-p,C=m+I*R/O,k=y+L*R/O}n.bezierCurveTo(v,f,h,p,m,y),v=C,f=k}else n.lineTo(m,y)}s=m,c=y,g+=r}return b}var oe=function(){function n(){this.smooth=0,this.smoothConstraint=!0}return n}(),na=function(n){B(e,n);function e(t){var a=n.call(this,t)||this;return a.type="ec-polyline",a}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new oe},e.prototype.buildPath=function(t,a){var i=a.points,r=0,o=i.length/2;if(a.connectNulls){for(;o>0&&j(i[o*2-2],i[o*2-1]);o--);for(;r<o&&j(i[r*2],i[r*2+1]);r++);}for(;r<o;)r+=Dt(t,i,r,o,o,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},e.prototype.getPointOn=function(t,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,r=i.data,o=Pe.CMD,l,u,s=a==="x",c=[],v=0;v<r.length;){var f=r[v++],h=void 0,p=void 0,g=void 0,b=void 0,m=void 0,y=void 0,d=void 0;switch(f){case o.M:l=r[v++],u=r[v++];break;case o.L:if(h=r[v++],p=r[v++],d=s?(t-l)/(h-l):(t-u)/(p-u),d<=1&&d>=0){var P=s?(p-u)*d+u:(h-l)*d+l;return s?[t,P]:[P,t]}l=h,u=p;break;case o.C:h=r[v++],p=r[v++],g=r[v++],b=r[v++],m=r[v++],y=r[v++];var D=s?Nt(l,h,g,m,t,c):Nt(u,p,b,y,t,c);if(D>0)for(var _=0;_<D;_++){var S=c[_];if(S<=1&&S>=0){var P=s?Et(u,p,b,y,S):Et(l,h,g,m,S);return s?[t,P]:[P,t]}}l=m,u=y;break}}},e}(te),ia=function(n){B(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(oe),oa=function(n){B(e,n);function e(t){var a=n.call(this,t)||this;return a.type="ec-polygon",a}return e.prototype.getDefaultShape=function(){return new ia},e.prototype.buildPath=function(t,a){var i=a.points,r=a.stackedOnPoints,o=0,l=i.length/2,u=a.smoothMonotone;if(a.connectNulls){for(;l>0&&j(i[l*2-2],i[l*2-1]);l--);for(;o<l&&j(i[o*2],i[o*2+1]);o++);}for(;o<l;){var s=Dt(t,i,o,l,l,1,a.smooth,u,a.connectNulls);Dt(t,r,o+s-1,s,l,-1,a.stackedOnSmooth,u,a.connectNulls),o+=s+1,t.closePath()}},e}(te);function le(n,e,t,a,i){var r=n.getArea(),o=r.x,l=r.y,u=r.width,s=r.height,c=t.get(["lineStyle","width"])||0;o-=c/2,l-=c/2,u+=c,s+=c,u=Math.ceil(u),o!==Math.floor(o)&&(o=Math.floor(o),u++);var v=new ht({shape:{x:o,y:l,width:u,height:s}});if(e){var f=n.getBaseAxis(),h=f.isHorizontal(),p=f.inverse;h?(p&&(v.shape.x+=u),v.shape.width=0):(p||(v.shape.y+=s),v.shape.height=0);var g=Z(i)?function(b){i(b,v)}:null;ct(v,{shape:{width:u,height:s,x:o,y:l}},t,null,a,g)}return v}function se(n,e,t){var a=n.getArea(),i=nt(a.r0,1),r=nt(a.r,1),o=new Ie({shape:{cx:nt(n.cx,1),cy:nt(n.cy,1),r0:i,r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(e){var l=n.getBaseAxis().dim==="angle";l?o.shape.endAngle=a.startAngle:o.shape.r=i,ct(o,{shape:{endAngle:a.endAngle,r}},t)}return o}function Oa(n,e,t,a,i){if(n){if(n.type==="polar")return se(n,e,t);if(n.type==="cartesian2d")return le(n,e,t,a,i)}else return null;return null}function $t(n,e){if(n.length===e.length){for(var t=0;t<n.length;t++)if(n[t]!==e[t])return;return!0}}function Zt(n){for(var e=1/0,t=1/0,a=-1/0,i=-1/0,r=0;r<n.length;){var o=n[r++],l=n[r++];isNaN(o)||(e=Math.min(o,e),a=Math.max(o,a)),isNaN(l)||(t=Math.min(l,t),i=Math.max(l,i))}return[[e,t],[a,i]]}function jt(n,e){var t=Zt(n),a=t[0],i=t[1],r=Zt(e),o=r[0],l=r[1];return Math.max(Math.abs(a[0]-o[0]),Math.abs(a[1]-o[1]),Math.abs(i[0]-l[0]),Math.abs(i[1]-l[1]))}function qt(n){return Gt(n)?n:n?.5:0}function la(n,e,t){if(!t.valueDim)return[];for(var a=e.count(),i=K(a*2),r=0;r<a;r++){var o=ie(t,n,e,r);i[r*2]=o[0],i[r*2+1]=o[1]}return i}function $(n,e,t,a,i){var r=t.getBaseAxis(),o=r.dim==="x"||r.dim==="radius"?0:1,l=[],u=0,s=[],c=[],v=[],f=[];if(i){for(u=0;u<n.length;u+=2){var h=e||n;!isNaN(h[u])&&!isNaN(h[u+1])&&f.push(n[u],n[u+1])}n=f}for(u=0;u<n.length-2;u+=2)switch(v[0]=n[u+2],v[1]=n[u+3],c[0]=n[u],c[1]=n[u+1],l.push(c[0],c[1]),a){case"end":s[o]=v[o],s[1-o]=c[1-o],l.push(s[0],s[1]);break;case"middle":var p=(c[o]+v[o])/2,g=[];s[o]=g[o]=p,s[1-o]=c[1-o],g[1-o]=v[1-o],l.push(s[0],s[1]),l.push(g[0],g[1]);break;default:s[o]=c[o],s[1-o]=v[1-o],l.push(s[0],s[1])}return l.push(n[u++],n[u++]),l}function sa(n,e){var t=[],a=n.length,i,r;function o(c,v,f){var h=c.coord,p=(f-h)/(v.coord-h),g=ke(p,[c.color,v.color]);return{coord:f,color:g}}for(var l=0;l<a;l++){var u=n[l],s=u.coord;if(s<0)i=u;else if(s>e){r?t.push(o(r,u,e)):i&&t.push(o(i,u,0),o(i,u,e));break}else i&&(t.push(o(i,u,0)),i=null),t.push(u),r=u}return t}function ua(n,e,t){var a=n.getVisual("visualMeta");if(!(!a||!a.length||!n.count())&&e.type==="cartesian2d"){for(var i,r,o=a.length-1;o>=0;o--){var l=n.getDimensionInfo(a[o].dimension);if(i=l&&l.coordDim,i==="x"||i==="y"){r=a[o];break}}if(r){var u=e.getAxis(i),s=vt(r.stops,function(d){return{coord:u.toGlobalCoord(u.dataToCoord(d.value)),color:d.color}}),c=s.length,v=r.outerColors.slice();c&&s[0].coord>s[c-1].coord&&(s.reverse(),v.reverse());var f=sa(s,i==="x"?t.getWidth():t.getHeight()),h=f.length;if(!h&&c)return s[0].coord<0?v[1]?v[1]:s[c-1].color:v[0]?v[0]:s[0].color;var p=10,g=f[0].coord-p,b=f[h-1].coord+p,m=b-g;if(m<.001)return"transparent";F(f,function(d){d.offset=(d.coord-g)/m}),f.push({offset:h?f[h-1].offset:.5,color:v[1]||"transparent"}),f.unshift({offset:h?f[0].offset:.5,color:v[0]||"transparent"});var y=new Le(0,0,0,0,f,!0);return y[i]=g,y[i+"2"]=b,y}}}function ca(n,e,t){var a=n.get("showAllSymbol"),i=a==="auto";if(!(a&&!i)){var r=t.getAxesByScale("ordinal")[0];if(r&&!(i&&va(r,e))){var o=e.mapDimension(r.dim),l={};return F(r.getViewLabels(),function(u){var s=r.scale.getRawOrdinalNumber(u.tickValue);l[s]=1}),function(u){return!l.hasOwnProperty(e.get(o,u))}}}}function va(n,e){var t=n.getExtent(),a=Math.abs(t[1]-t[0])/n.scale.count();isNaN(a)&&(a=0);for(var i=e.count(),r=Math.max(1,Math.round(i/5)),o=0;o<i;o+=r)if(Tt.getSymbolSize(e,o)[n.isHorizontal()?1:0]*1.5>a)return!1;return!0}function ha(n,e){return isNaN(n)||isNaN(e)}function fa(n){for(var e=n.length/2;e>0&&ha(n[e*2-2],n[e*2-1]);e--);return e-1}function Jt(n,e){return[n[e*2],n[e*2+1]]}function ga(n,e,t){for(var a=n.length/2,i=t==="x"?0:1,r,o,l=0,u=-1,s=0;s<a;s++)if(o=n[s*2+i],!(isNaN(o)||isNaN(n[s*2+1-i]))){if(s===0){r=o;continue}if(r<=e&&o>=e||r>=e&&o<=e){u=s;break}l=s,r=o}return{range:[l,u],t:(e-r)/(o-r)}}function ue(n){if(n.get(["endLabel","show"]))return!0;for(var e=0;e<Bt.length;e++)if(n.get([Bt[e],"endLabel","show"]))return!0;return!1}function mt(n,e,t,a){if(we(e,"cartesian2d")){var i=a.getModel("endLabel"),r=i.get("valueAnimation"),o=a.getData(),l={lastFrameIndex:0},u=ue(a)?function(h,p){n._endLabelOnDuring(h,p,o,l,r,i,e)}:null,s=e.getBaseAxis().isHorizontal(),c=le(e,t,a,function(){var h=n._endLabel;h&&t&&l.originalX!=null&&h.attr({x:l.originalX,y:l.originalY})},u);if(!a.get("clip",!0)){var v=c.shape,f=Math.max(v.width,v.height);s?(v.y-=f,v.height+=f*2):(v.x-=f,v.width+=f*2)}return u&&u(1,c),c}else return se(e,t,a)}function pa(n,e){var t=e.getBaseAxis(),a=t.isHorizontal(),i=t.inverse,r=a?i?"right":"left":"center",o=a?"middle":i?"top":"bottom";return{normal:{align:n.get("align")||r,verticalAlign:n.get("verticalAlign")||o}}}var ma=function(n){B(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.init=function(){var t=new Q,a=new ta;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=t,this._changePolyState=ee(this._changePolyState,this)},e.prototype.render=function(t,a,i){var r=t.coordinateSystem,o=this.group,l=t.getData(),u=t.getModel("lineStyle"),s=t.getModel("areaStyle"),c=l.getLayout("points")||[],v=r.type==="polar",f=this._coordSys,h=this._symbolDraw,p=this._polyline,g=this._polygon,b=this._lineGroup,m=!a.ssr&&t.get("animation"),y=!s.isEmpty(),d=s.get("origin"),P=ne(r,l,d),D=y&&la(r,l,P),_=t.get("showSymbol"),S=t.get("connectNulls"),A=_&&!v&&ca(t,l,r),w=this._data;w&&w.eachItemGraphicEl(function(E,ft){E.__temp&&(o.remove(E),w.setItemGraphicEl(ft,null))}),_||h.remove(),o.add(b);var I=v?!1:t.get("step"),L;r&&r.getArea&&t.get("clip",!0)&&(L=r.getArea(),L.width!=null?(L.x-=.1,L.y-=.1,L.width+=.2,L.height+=.2):L.r0&&(L.r0-=.5,L.r+=.5)),this._clipShapeForSymbol=L;var C=ua(l,r,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(p&&f.type===r.type&&I===this._step))_&&h.updateData(l,{isIgnore:A,clipShape:L,disableAnimation:!0,getSymbolPoint:function(E){return[c[E*2],c[E*2+1]]}}),m&&this._initSymbolLabelAnimation(l,r,L),I&&(D&&(D=$(D,c,r,I,S)),c=$(c,null,r,I,S)),p=this._newPolyline(c),y?g=this._newPolygon(c,D):g&&(b.remove(g),g=this._polygon=null),v||this._initOrUpdateEndLabel(t,r,zt(C)),b.setClipPath(mt(this,r,!0,t));else{y&&!g?g=this._newPolygon(c,D):g&&!y&&(b.remove(g),g=this._polygon=null),v||this._initOrUpdateEndLabel(t,r,zt(C));var k=b.getClipPath();if(k){var T=mt(this,r,!1,t);ct(k,{shape:T.shape},t)}else b.setClipPath(mt(this,r,!0,t));_&&h.updateData(l,{isIgnore:A,clipShape:L,disableAnimation:!0,getSymbolPoint:function(E){return[c[E*2],c[E*2+1]]}}),(!$t(this._stackedOnPoints,D)||!$t(this._points,c))&&(m?this._doUpdateAnimation(l,D,r,i,I,d,S):(I&&(D&&(D=$(D,c,r,I,S)),c=$(c,null,r,I,S)),p.setShape({points:c}),g&&g.setShape({points:c,stackedOnPoints:D})))}var G=t.getModel("emphasis"),N=G.get("focus"),V=G.get("blurScope"),O=G.get("disabled");if(p.useStyle(St(u.getLineStyle(),{fill:"none",stroke:C,lineJoin:"bevel"})),xt(p,t,"lineStyle"),p.style.lineWidth>0&&t.get(["emphasis","lineStyle","width"])==="bolder"){var R=p.getState("emphasis").style;R.lineWidth=+p.style.lineWidth+1}M(p).seriesIndex=t.seriesIndex,bt(p,N,V,O);var W=qt(t.get("smooth")),H=t.get("smoothMonotone");if(p.setShape({smooth:W,smoothMonotone:H,connectNulls:S}),g){var Y=l.getCalculationInfo("stackedOnSeries"),z=0;g.useStyle(St(s.getAreaStyle(),{fill:C,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),Y&&(z=qt(Y.get("smooth"))),g.setShape({smooth:W,stackedOnSmooth:z,smoothMonotone:H,connectNulls:S}),xt(g,t,"areaStyle"),M(g).seriesIndex=t.seriesIndex,bt(g,N,V,O)}var x=this._changePolyState;l.eachItemGraphicEl(function(E){E&&(E.onHoverStateChange=x)}),this._polyline.onHoverStateChange=x,this._data=l,this._coordSys=r,this._stackedOnPoints=D,this._points=c,this._step=I,this._valueOrigin=d,t.get("triggerLineEvent")&&(this.packEventData(t,p),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,a){M(a).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,a,i,r){var o=t.getData(),l=Vt(o,r);if(this._changePolyState("emphasis"),!(l instanceof Array)&&l!=null&&l>=0){var u=o.getLayout("points"),s=o.getItemGraphicEl(l);if(!s){var c=u[l*2],v=u[l*2+1];if(isNaN(c)||isNaN(v)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,v))return;var f=t.get("zlevel")||0,h=t.get("z")||0;s=new Tt(o,l),s.x=c,s.y=v,s.setZ(f,h);var p=s.getSymbolPath().getTextContent();p&&(p.zlevel=f,p.z=h,p.z2=this._polyline.z2+1),s.__temp=!0,o.setItemGraphicEl(l,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else gt.prototype.highlight.call(this,t,a,i,r)},e.prototype.downplay=function(t,a,i,r){var o=t.getData(),l=Vt(o,r);if(this._changePolyState("normal"),l!=null&&l>=0){var u=o.getItemGraphicEl(l);u&&(u.__temp?(o.setItemGraphicEl(l,null),this.group.remove(u)):u.downplay())}else gt.prototype.downplay.call(this,t,a,i,r)},e.prototype._changePolyState=function(t){var a=this._polygon;Ft(this._polyline,t),a&&Ft(a,t)},e.prototype._newPolyline=function(t){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new na({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},e.prototype._newPolygon=function(t,a){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new oa({shape:{points:t,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},e.prototype._initSymbolLabelAnimation=function(t,a,i){var r,o,l=a.getBaseAxis(),u=l.inverse;a.type==="cartesian2d"?(r=l.isHorizontal(),o=!1):a.type==="polar"&&(r=l.dim==="angle",o=!0);var s=t.hostModel,c=s.get("animationDuration");Z(c)&&(c=c(null));var v=s.get("animationDelay")||0,f=Z(v)?v(null):v;t.eachItemGraphicEl(function(h,p){var g=h;if(g){var b=[h.x,h.y],m=void 0,y=void 0,d=void 0;if(i)if(o){var P=i,D=a.pointToCoord(b);r?(m=P.startAngle,y=P.endAngle,d=-D[1]/180*Math.PI):(m=P.r0,y=P.r,d=D[0])}else{var _=i;r?(m=_.x,y=_.x+_.width,d=h.x):(m=_.y+_.height,y=_.y,d=h.y)}var S=y===m?0:(d-m)/(y-m);u&&(S=1-S);var A=Z(v)?v(p):c*S+f,w=g.getSymbolPath(),I=w.getTextContent();g.attr({scaleX:0,scaleY:0}),g.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:A}),I&&I.animateFrom({style:{opacity:0}},{duration:300,delay:A}),w.disableLabelAnimation=!0}})},e.prototype._initOrUpdateEndLabel=function(t,a,i){var r=t.getModel("endLabel");if(ue(t)){var o=t.getData(),l=this._polyline,u=o.getLayout("points");if(!u){l.removeTextContent(),this._endLabel=null;return}var s=this._endLabel;s||(s=this._endLabel=new ut({z2:200}),s.ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var c=fa(u);c>=0&&(kt(l,wt(t,"endLabel"),{inheritColor:i,labelFetcher:t,labelDataIndex:c,defaultText:function(v,f,h){return h!=null?Qe(o,h):re(o,v)},enableTextSetter:!0},pa(r,a)),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,a,i,r,o,l,u){var s=this._endLabel,c=this._polyline;if(s){t<1&&r.originalX==null&&(r.originalX=s.x,r.originalY=s.y);var v=i.getLayout("points"),f=i.hostModel,h=f.get("connectNulls"),p=l.get("precision"),g=l.get("distance")||0,b=u.getBaseAxis(),m=b.isHorizontal(),y=b.inverse,d=a.shape,P=y?m?d.x:d.y+d.height:m?d.x+d.width:d.y,D=(m?g:0)*(y?-1:1),_=(m?0:-g)*(y?-1:1),S=m?"x":"y",A=ga(v,P,S),w=A.range,I=w[1]-w[0],L=void 0;if(I>=1){if(I>1&&!h){var C=Jt(v,w[0]);s.attr({x:C[0]+D,y:C[1]+_}),o&&(L=f.getRawValue(w[0]))}else{var C=c.getPointOn(P,S);C&&s.attr({x:C[0]+D,y:C[1]+_});var k=f.getRawValue(w[0]),T=f.getRawValue(w[1]);o&&(L=Ae(i,p,k,T,A.t))}r.lastFrameIndex=w[0]}else{var G=t===1||r.lastFrameIndex>0?w[0]:0,C=Jt(v,G);o&&(L=f.getRawValue(G)),s.attr({x:C[0]+D,y:C[1]+_})}if(o){var N=Ce(s);typeof N.setLabelText=="function"&&N.setLabelText(L)}}},e.prototype._doUpdateAnimation=function(t,a,i,r,o,l,u){var s=this._polyline,c=this._polygon,v=t.hostModel,f=ra(this._data,t,this._stackedOnPoints,a,this._coordSys,i,this._valueOrigin),h=f.current,p=f.stackedOnCurrent,g=f.next,b=f.stackedOnNext;if(o&&(p=$(f.stackedOnCurrent,f.current,i,o,u),h=$(f.current,null,i,o,u),b=$(f.stackedOnNext,f.next,i,o,u),g=$(f.next,null,i,o,u)),jt(h,g)>3e3||c&&jt(p,b)>3e3){s.stopAnimation(),s.setShape({points:g}),c&&(c.stopAnimation(),c.setShape({points:g,stackedOnPoints:b}));return}s.shape.__points=f.current,s.shape.points=h;var m={shape:{points:g}};f.current!==h&&(m.shape.__points=f.next),s.stopAnimation(),at(s,m,v),c&&(c.setShape({points:h,stackedOnPoints:p}),c.stopAnimation(),at(c,{shape:{stackedOnPoints:b}},v),s.shape.points!==c.shape.points&&(c.shape.points=s.shape.points));for(var y=[],d=f.status,P=0;P<d.length;P++){var D=d[P].cmd;if(D==="="){var _=t.getItemGraphicEl(d[P].idx1);_&&y.push({el:_,ptIdx:P})}}s.animators&&s.animators.length&&s.animators[0].during(function(){c&&c.dirtyShape();for(var S=s.shape.__points,A=0;A<y.length;A++){var w=y[A].el,I=y[A].ptIdx*2;w.x=S[I],w.y=S[I+1],w.markRedraw()}})},e.prototype.remove=function(t){var a=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(r,o){r.__temp&&(a.remove(r),i.setItemGraphicEl(o,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(gt);function ya(n,e){return{seriesType:n,plan:Ge(),reset:function(t){var a=t.getData(),i=t.coordinateSystem;if(t.pipelineContext,!!i){var r=vt(i.dimensions,function(v){return a.mapDimension(v)}).slice(0,2),o=r.length,l=a.getCalculationInfo("stackResultDimension");st(a,r[0])&&(r[0]=l),st(a,r[1])&&(r[1]=l);var u=a.getStore(),s=a.getDimensionIndex(r[0]),c=a.getDimensionIndex(r[1]);return o&&{progress:function(v,f){for(var h=v.end-v.start,p=K(h*o),g=[],b=[],m=v.start,y=0;m<v.end;m++){var d=void 0;if(o===1){var P=u.get(s,m);d=i.dataToPoint(P,null,b)}else g[0]=u.get(s,m),g[1]=u.get(c,m),d=i.dataToPoint(g,null,b);p[y++]=d[0],p[y++]=d[1]}f.setLayout("points",p)}}}}}}var da={average:function(n){for(var e=0,t=0,a=0;a<n.length;a++)isNaN(n[a])||(e+=n[a],t++);return t===0?NaN:e/t},sum:function(n){for(var e=0,t=0;t<n.length;t++)e+=n[t]||0;return e},max:function(n){for(var e=-1/0,t=0;t<n.length;t++)n[t]>e&&(e=n[t]);return isFinite(e)?e:NaN},min:function(n){for(var e=1/0,t=0;t<n.length;t++)n[t]<e&&(e=n[t]);return isFinite(e)?e:NaN},nearest:function(n){return n[0]}},ba=function(n){return Math.round(n.length/2)};function Sa(n){return{seriesType:n,reset:function(e,t,a){var i=e.getData(),r=e.get("sampling"),o=e.coordinateSystem,l=i.count();if(l>10&&o.type==="cartesian2d"&&r){var u=o.getBaseAxis(),s=o.getOtherAxis(u),c=u.getExtent(),v=a.getDevicePixelRatio(),f=Math.abs(c[1]-c[0])*(v||1),h=Math.round(l/f);if(isFinite(h)&&h>1){r==="lttb"?e.setData(i.lttbDownSample(i.mapDimension(s.dim),1/h)):r==="minmax"&&e.setData(i.minmaxDownSample(i.mapDimension(s.dim),1/h));var p=void 0;rt(r)?p=da[r]:Z(r)&&(p=r),p&&e.setData(i.downSample(i.mapDimension(s.dim),1/h,p,ba))}}}}}function Ra(n){n.registerChartView(ma),n.registerSeriesModel(Me),n.registerLayout(ya("line")),n.registerVisual({seriesType:"line",reset:function(e){var t=e.getData(),a=e.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=t.getVisual("style").fill),t.setVisual("legendLineStyle",a)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,Sa("line"))}function _a(n,e){var t=Te(e.get("padding")),a=e.getItemStyle(["color","opacity"]);return a.fill=e.get("backgroundColor"),n=new ht({shape:{x:n.x-t[3],y:n.y-t[0],width:n.width+t[1]+t[3],height:n.height+t[0]+t[2],r:e.get("borderRadius")},style:a,silent:!0,z2:-1}),n}var Da=function(n,e){if(e==="all")return{type:"all",title:n.getLocaleModel().get(["legend","selector","all"])};if(e==="inverse")return{type:"inverse",title:n.getLocaleModel().get(["legend","selector","inverse"])}},Pt=function(n){B(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.layoutMode={type:"box",ignoreSize:!0},t}return e.prototype.init=function(t,a,i){this.mergeDefaultAndTheme(t,i),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(t,a){n.prototype.mergeOption.call(this,t,a),this._updateSelector(t)},e.prototype._updateSelector=function(t){var a=t.selector,i=this.ecModel;a===!0&&(a=t.selector=["all","inverse"]),Lt(a)&&F(a,function(r,o){rt(r)&&(r={type:r}),a[o]=Oe(r,Da(i,r.type))})},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&this.get("selectedMode")==="single"){for(var a=!1,i=0;i<t.length;i++){var r=t[i].get("name");if(this.isSelected(r)){this.select(r),a=!0;break}}!a&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var a=[],i=[];t.eachRawSeries(function(u){var s=u.name;i.push(s);var c;if(u.legendVisualProvider){var v=u.legendVisualProvider,f=v.getAllNames();t.isSeriesFiltered(u)||(i=i.concat(f)),f.length?a=a.concat(f):c=!0}else c=!0;c&&Re(u)&&a.push(u.name)}),this._availableNames=i;var r=this.get("data")||a,o=ae(),l=vt(r,function(u){return(rt(u)||Gt(u))&&(u={name:u}),o.get(u.name)?null:(o.set(u.name,!0),new Ne(u,this,this.ecModel))},this);this._data=Ee(l,function(u){return!!u})},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var a=this.option.selected,i=this.get("selectedMode");if(i==="single"){var r=this._data;F(r,function(o){a[o.get("name")]=!1})}a[t]=!0},e.prototype.unSelect=function(t){this.get("selectedMode")!=="single"&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var a=this.option.selected;a.hasOwnProperty(t)||(a[t]=!0),this[a[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,a=this.option.selected;F(t,function(i){a[i.get("name",!0)]=!0})},e.prototype.inverseSelect=function(){var t=this._data,a=this.option.selected;F(t,function(i){var r=i.get("name",!0);a.hasOwnProperty(r)||(a[r]=!0),a[r]=!a[r]})},e.prototype.isSelected=function(t){var a=this.option.selected;return!(a.hasOwnProperty(t)&&!a[t])&&ze(this._availableNames,t)>=0},e.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(xe),q=J,It=F,it=Q,ce=function(n){B(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!1,t}return e.prototype.init=function(){this.group.add(this._contentGroup=new it),this.group.add(this._selectorGroup=new it),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,a,i){var r=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!t.get("show",!0)){var o=t.get("align"),l=t.get("orient");(!o||o==="auto")&&(o=t.get("left")==="right"&&l==="vertical"?"right":"left");var u=t.get("selector",!0),s=t.get("selectorPosition",!0);u&&(!s||s==="auto")&&(s=l==="horizontal"?"end":"start"),this.renderInner(o,t,a,i,u,l,s);var c=t.getBoxLayoutParams(),v={width:i.getWidth(),height:i.getHeight()},f=t.get("padding"),h=Wt(c,v,f),p=this.layoutInner(t,o,h,r,u,s),g=Wt(St({width:p.width,height:p.height},c),v,f);this.group.x=g.x-p.x,this.group.y=g.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=_a(p,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,a,i,r,o,l,u){var s=this.getContentGroup(),c=ae(),v=a.get("selectedMode"),f=[];i.eachRawSeries(function(h){!h.get("legendHoverLink")&&f.push(h.id)}),It(a.getData(),function(h,p){var g=h.get("name");if(!this.newlineDisabled&&(g===""||g===`
`)){var b=new it;b.newline=!0,s.add(b);return}var m=i.getSeriesByName(g)[0];if(!c.get(g))if(m){var y=m.getData(),d=y.getVisual("legendLineStyle")||{},P=y.getVisual("legendIcon"),D=y.getVisual("style"),_=this._createItem(m,g,p,h,a,t,d,D,P,v,r);_.on("click",q(Kt,g,null,r,f)).on("mouseover",q(At,m.name,null,r,f)).on("mouseout",q(Ct,m.name,null,r,f)),i.ssr&&_.eachChild(function(S){var A=M(S);A.seriesIndex=m.seriesIndex,A.dataIndex=p,A.ssrType="legend"}),c.set(g,!0)}else i.eachRawSeries(function(S){if(!c.get(g)&&S.legendVisualProvider){var A=S.legendVisualProvider;if(!A.containName(g))return;var w=A.indexOfName(g),I=A.getItemVisual(w,"style"),L=A.getItemVisual(w,"legendIcon"),C=Ve(I.fill);C&&C[3]===0&&(C[3]=.2,I=lt(lt({},I),{fill:Fe(C,"rgba")}));var k=this._createItem(S,g,p,h,a,t,{},I,L,v,r);k.on("click",q(Kt,null,g,r,f)).on("mouseover",q(At,null,g,r,f)).on("mouseout",q(Ct,null,g,r,f)),i.ssr&&k.eachChild(function(T){var G=M(T);G.seriesIndex=S.seriesIndex,G.dataIndex=p,G.ssrType="legend"}),c.set(g,!0)}},this)},this),o&&this._createSelector(o,a,r,l,u)},e.prototype._createSelector=function(t,a,i,r,o){var l=this.getSelectorGroup();It(t,function(s){var c=s.type,v=new ut({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect",legendId:a.id})}});l.add(v);var f=a.getModel("selectorLabel"),h=a.getModel(["emphasis","selectorLabel"]);kt(v,{normal:f,emphasis:h},{defaultText:s.title}),Ht(v)})},e.prototype._createItem=function(t,a,i,r,o,l,u,s,c,v,f){var h=t.visualDrawType,p=o.get("itemWidth"),g=o.get("itemHeight"),b=o.isSelected(a),m=r.get("symbolRotate"),y=r.get("symbolKeepAspect"),d=r.get("icon");c=d||c||"roundRect";var P=Pa(c,r,u,s,h,b,f),D=new it,_=r.getModel("textStyle");if(Z(t.getLegendIcon)&&(!d||d==="inherit"))D.add(t.getLegendIcon({itemWidth:p,itemHeight:g,icon:c,iconRotate:m,itemStyle:P.itemStyle,lineStyle:P.lineStyle,symbolKeepAspect:y}));else{var S=d==="inherit"&&t.getData().getVisual("symbol")?m==="inherit"?t.getData().getVisual("symbolRotate"):m:0;D.add(Ia({itemWidth:p,itemHeight:g,icon:c,iconRotate:S,itemStyle:P.itemStyle,symbolKeepAspect:y}))}var A=l==="left"?p+5:-5,w=l,I=o.get("formatter"),L=a;rt(I)&&I?L=I.replace("{name}",a??""):Z(I)&&(L=I(a));var C=b?_.getTextColor():r.get("inactiveColor");D.add(new ut({style:Be(_,{text:L,x:A,y:g/2,fill:C,align:w,verticalAlign:"middle"},{inheritColor:C})}));var k=new ht({shape:D.getBoundingRect(),style:{fill:"transparent"}}),T=r.getModel("tooltip");return T.get("show")&&We({el:k,componentModel:o,itemName:a,itemTooltipOption:T.option}),D.add(k),D.eachChild(function(G){G.silent=!0}),k.silent=!v,this.getContentGroup().add(D),Ht(D),D.__legendDataIndex=i,D},e.prototype.layoutInner=function(t,a,i,r,o,l){var u=this.getContentGroup(),s=this.getSelectorGroup();et(t.get("orient"),u,t.get("itemGap"),i.width,i.height);var c=u.getBoundingRect(),v=[-c.x,-c.y];if(s.markRedraw(),u.markRedraw(),o){et("horizontal",s,t.get("selectorItemGap",!0));var f=s.getBoundingRect(),h=[-f.x,-f.y],p=t.get("selectorButtonGap",!0),g=t.getOrient().index,b=g===0?"width":"height",m=g===0?"height":"width",y=g===0?"y":"x";l==="end"?h[g]+=c[b]+p:v[g]+=f[b]+p,h[1-g]+=c[m]/2-f[m]/2,s.x=h[0],s.y=h[1],u.x=v[0],u.y=v[1];var d={x:0,y:0};return d[b]=c[b]+p+f[b],d[m]=Math.max(c[m],f[m]),d[y]=Math.min(0,f[y]+h[1-g]),d}else return u.x=v[0],u.y=v[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(He);function Pa(n,e,t,a,i,r,o){function l(b,m){b.lineWidth==="auto"&&(b.lineWidth=m.lineWidth>0?2:0),It(b,function(y,d){b[d]==="inherit"&&(b[d]=m[d])})}var u=e.getModel("itemStyle"),s=u.getItemStyle(),c=n.lastIndexOf("empty",0)===0?"fill":"stroke",v=u.getShallow("decal");s.decal=!v||v==="inherit"?a.decal:Ue(v,o),s.fill==="inherit"&&(s.fill=a[i]),s.stroke==="inherit"&&(s.stroke=a[c]),s.opacity==="inherit"&&(s.opacity=(i==="fill"?a:t).opacity),l(s,a);var f=e.getModel("lineStyle"),h=f.getLineStyle();if(l(h,t),s.fill==="auto"&&(s.fill=a.fill),s.stroke==="auto"&&(s.stroke=a.fill),h.stroke==="auto"&&(h.stroke=a.fill),!r){var p=e.get("inactiveBorderWidth"),g=s[c];s.lineWidth=p==="auto"?a.lineWidth>0&&g?2:0:s.lineWidth,s.fill=e.get("inactiveColor"),s.stroke=e.get("inactiveBorderColor"),h.stroke=f.get("inactiveColor"),h.lineWidth=f.get("inactiveWidth")}return{itemStyle:s,lineStyle:h}}function Ia(n){var e=n.icon||"roundRect",t=ot(e,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill,n.symbolKeepAspect);return t.setStyle(n.itemStyle),t.rotation=(n.iconRotate||0)*Math.PI/180,t.setOrigin([n.itemWidth/2,n.itemHeight/2]),e.indexOf("empty")>-1&&(t.style.stroke=t.style.fill,t.style.fill="#fff",t.style.lineWidth=2),t}function Kt(n,e,t,a){Ct(n,e,t,a),t.dispatchAction({type:"legendToggleSelect",name:n??e}),At(n,e,t,a)}function ve(n){for(var e=n.getZr().storage.getDisplayList(),t,a=0,i=e.length;a<i&&!(t=e[a].states.emphasis);)a++;return t&&t.hoverLayer}function At(n,e,t,a){ve(t)||t.dispatchAction({type:"highlight",seriesName:n,name:e,excludeSeriesId:a})}function Ct(n,e,t,a){ve(t)||t.dispatchAction({type:"downplay",seriesName:n,name:e,excludeSeriesId:a})}function Aa(n){var e=n.findComponents({mainType:"legend"});e&&e.length&&n.filterSeries(function(t){for(var a=0;a<e.length;a++)if(!e[a].isSelected(t.name))return!1;return!0})}function tt(n,e,t){var a=n==="allSelect"||n==="inverseSelect",i={},r=[];t.eachComponent({mainType:"legend",query:e},function(l){a?l[n]():l[n](e.name),Mt(l,i),r.push(l.componentIndex)});var o={};return t.eachComponent("legend",function(l){F(i,function(u,s){l[u?"select":"unSelect"](s)}),Mt(l,o)}),a?{selected:o,legendIndex:r}:{name:e.name,selected:o}}function Mt(n,e){var t=e||{};return F(n.getData(),function(a){var i=a.get("name");if(!(i===`
`||i==="")){var r=n.isSelected(i);Xe(t,i)?t[i]=t[i]&&r:t[i]=r}}),t}function Ca(n){n.registerAction("legendToggleSelect","legendselectchanged",J(tt,"toggleSelected")),n.registerAction("legendAllSelect","legendselectall",J(tt,"allSelect")),n.registerAction("legendInverseSelect","legendinverseselect",J(tt,"inverseSelect")),n.registerAction("legendSelect","legendselected",J(tt,"select")),n.registerAction("legendUnSelect","legendunselected",J(tt,"unSelect"))}function he(n){n.registerComponentModel(Pt),n.registerComponentView(ce),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Aa),n.registerSubTypeDefaulter("legend",function(){return"plain"}),Ca(n)}var La=function(n){B(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(t,a,i){var r=$e(t);n.prototype.init.call(this,t,a,i),Qt(this,t,r)},e.prototype.mergeOption=function(t,a){n.prototype.mergeOption.call(this,t,a),Qt(this,this.option,t)},e.type="legend.scroll",e.defaultOption=Ze(Pt.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(Pt);function Qt(n,e,t){var a=n.getOrient(),i=[1,1];i[a.index]=0,je(e,t,{type:"box",ignoreSize:!!i})}var Yt=Q,yt=["width","height"],dt=["x","y"],wa=function(n){B(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.newlineDisabled=!0,t._currentIndex=0,t}return e.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new Yt),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Yt)},e.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(t,a,i,r,o,l,u){var s=this;n.prototype.renderInner.call(this,t,a,i,r,o,l,u);var c=this._controllerGroup,v=a.get("pageIconSize",!0),f=Lt(v)?v:[v,v];p("pagePrev",0);var h=a.getModel("pageTextStyle");c.add(new ut({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(g,b){var m=g+"DataIndex",y=qe(a.get("pageIcons",!0)[a.getOrient().name][b],{onclick:ee(s._pageGo,s,m,a,r)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});y.name=g,c.add(y)}},e.prototype.layoutInner=function(t,a,i,r,o,l){var u=this.getSelectorGroup(),s=t.getOrient().index,c=yt[s],v=dt[s],f=yt[1-s],h=dt[1-s];o&&et("horizontal",u,t.get("selectorItemGap",!0));var p=t.get("selectorButtonGap",!0),g=u.getBoundingRect(),b=[-g.x,-g.y],m=Je(i);o&&(m[c]=i[c]-g[c]-p);var y=this._layoutContentAndController(t,r,m,s,c,f,h,v);if(o){if(l==="end")b[s]+=y[c]+p;else{var d=g[c]+p;b[s]-=d,y[v]-=d}y[c]+=g[c]+p,b[1-s]+=y[h]+y[f]/2-g[f]/2,y[f]=Math.max(y[f],g[f]),y[h]=Math.min(y[h],g[h]+b[1-s]),u.x=b[0],u.y=b[1],u.markRedraw()}return y},e.prototype._layoutContentAndController=function(t,a,i,r,o,l,u,s){var c=this.getContentGroup(),v=this._containerGroup,f=this._controllerGroup;et(t.get("orient"),c,t.get("itemGap"),r?i.width:null,r?null:i.height),et("horizontal",f,t.get("pageButtonItemGap",!0));var h=c.getBoundingRect(),p=f.getBoundingRect(),g=this._showController=h[o]>i[o],b=[-h.x,-h.y];a||(b[r]=c[s]);var m=[0,0],y=[-p.x,-p.y],d=Ke(t.get("pageButtonGap",!0),t.get("itemGap",!0));if(g){var P=t.get("pageButtonPosition",!0);P==="end"?y[r]+=i[o]-p[o]:m[r]+=p[o]+d}y[1-r]+=h[l]/2-p[l]/2,c.setPosition(b),v.setPosition(m),f.setPosition(y);var D={x:0,y:0};if(D[o]=g?i[o]:h[o],D[l]=Math.max(h[l],p[l]),D[u]=Math.min(0,p[u]+y[1-r]),v.__rectSize=i[o],g){var _={x:0,y:0};_[o]=Math.max(i[o]-p[o]-d,0),_[l]=D[l],v.setClipPath(new ht({shape:_})),v.__rectSize=_[o]}else f.eachChild(function(A){A.attr({invisible:!0,silent:!0})});var S=this._getPageInfo(t);return S.pageIndex!=null&&at(c,{x:S.contentPosition[0],y:S.contentPosition[1]},g?t:null),this._updatePageInfoView(t,S),D},e.prototype._pageGo=function(t,a,i){var r=this._getPageInfo(a)[t];r!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:a.id})},e.prototype._updatePageInfoView=function(t,a){var i=this._controllerGroup;F(["pagePrev","pageNext"],function(c){var v=c+"DataIndex",f=a[v]!=null,h=i.childOfName(c);h&&(h.setStyle("fill",f?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),h.cursor=f?"pointer":"default")});var r=i.childOfName("pageText"),o=t.get("pageFormatter"),l=a.pageIndex,u=l!=null?l+1:0,s=a.pageCount;r&&o&&r.setStyle("text",rt(o)?o.replace("{current}",u==null?"":u+"").replace("{total}",s==null?"":s+""):o({current:u,total:s}))},e.prototype._getPageInfo=function(t){var a=t.get("scrollDataIndex",!0),i=this.getContentGroup(),r=this._containerGroup.__rectSize,o=t.getOrient().index,l=yt[o],u=dt[o],s=this._findTargetItemIndex(a),c=i.children(),v=c[s],f=c.length,h=f?1:0,p={contentPosition:[i.x,i.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return p;var g=P(v);p.contentPosition[o]=-g.s;for(var b=s+1,m=g,y=g,d=null;b<=f;++b)d=P(c[b]),(!d&&y.e>m.s+r||d&&!D(d,m.s))&&(y.i>m.i?m=y:m=d,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),y=d;for(var b=s-1,m=g,y=g,d=null;b>=-1;--b)d=P(c[b]),(!d||!D(y,d.s))&&m.i<y.i&&(y=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=d;return p;function P(_){if(_){var S=_.getBoundingRect(),A=S[u]+_[u];return{s:A,e:A+S[l],i:_.__legendDataIndex}}}function D(_,S){return _.e>=S&&_.s<=S+r}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var a,i=this.getContentGroup(),r;return i.eachChild(function(o,l){var u=o.__legendDataIndex;r==null&&u!=null&&(r=l),u===t&&(a=l)}),a??r},e.type="legend.scroll",e}(ce);function ka(n){n.registerAction("legendScroll","legendscroll",function(e,t){var a=e.scrollDataIndex;a!=null&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(a)})})}function Ga(n){_t(he),n.registerComponentModel(La),n.registerComponentView(wa),ka(n)}function Na(n){_t(he),_t(Ga)}export{Qe as a,Na as b,Oa as c,Sa as d,re as g,Ra as i};
